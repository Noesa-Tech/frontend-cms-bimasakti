import{s as H}from"./index-02e8bb08.js";import{s as J}from"./index-7a8e9154.js";import{s as z}from"./index-c3a9aed6.js";import{s as X}from"./index-29ef9c9d.js";import{s as q}from"./index-f8a1cad7.js";import{s as G}from"./index-f0f285fd.js";import{S as W}from"./service-2705930e.js";import{d as K,r as L,a as w,Q as le,o as x,c as T,b as s,e as l,f as t,H as N,J as i,E as P,L as Q,S as se,V as ne,P as ie,i as O,z as re,N as F,t as E,D as j,W as D,X as A}from"./index-e5ca3fe9.js";import{s as de}from"./index-a600e3b7.js";import{s as ue,a as ce}from"./index-14910fd4.js";import{s as me,a as pe}from"./index-3531a741.js";import{_ as ve}from"./TopBreadcrumb-e2acffae.js";import{s as fe}from"./index-df83a9f3.js";import{s as ye}from"./index-d7cabaf1.js";import"./index-fc9686cf.js";import"./index-d21f1610.js";import"./index-65cea784.js";import"./index-ddc9d307.js";import"./index-96e40a09.js";import"./index-8b098753.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-1962eafd.js";const be={class:"flex flex-col items-start gap-2 mb-4"},_e={class:"flex flex-col gap-2 items-start"},ge={key:0,class:"relative"},xe=["src"],Se={class:"absolute right-0 top-0"},$e={class:"flex flex-col gap-2 mb-4"},he={class:"flex flex-col gap-2 mb-4"},we={class:"flex flex-col gap-2"},Ve={class:"flex justify-end gap-2 mt-8"},Te=K({__name:"EditService",props:{service:{type:Object,required:!0}},emits:["on-close","on-save"],setup(I,{emit:k}){const u=I,S=k,V=W(),p=L([0,1]),r=w(null),v=L({name:u.service.name,description:u.service.description,status:u.service.status});async function _(){const a={...v,_method:"PATCH"};await V.updateServcice(u.service.id,a),S("on-save")}function y(a){switch(a){case 0:return"danger";case 1:return"success"}}function $(a){switch(a){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}function b(a){const n=a.files[0];v.image=n;const f=new FileReader;f.onload=async g=>{var h;r.value=(h=g.target)==null?void 0:h.result},f.readAsDataURL(n)}return le(()=>u.service,a=>{a!=null&&a.image_url&&(r.value=a.image_url)},{immediate:!0}),(a,n)=>{const f=q,g=X,h=z,m=J,e=H;return x(),T(Q,null,[s("div",be,[n[6]||(n[6]=s("label",{for:"name"},"Ubah Gambar",-1)),s("div",_e,[l(r)?(x(),T("div",ge,[s("img",{src:l(r),alt:"Image",class:"shadow-md rounded-xl w-full sm:w-64"},null,8,xe),s("div",Se,[t(f,{icon:"pi pi-times",rounded:"",outlined:"",onClick:n[0]||(n[0]=d=>r.value=null)})])])):N("",!0),t(g,{mode:"basic",onSelect:b,customUpload:"",severity:"secondary",class:"p-button-outlined",maxFileSize:1e6,chooseLabel:l(r)?"Ubah Foto":"Pilih Foto",chooseIcon:"pi pi-image"},null,8,["chooseLabel"])])]),s("div",$e,[n[7]||(n[7]=s("label",{for:"name"},"Nama Layanan",-1)),t(h,{modelValue:l(v).name,"onUpdate:modelValue":n[1]||(n[1]=d=>l(v).name=d),id:"name","aria-describedby":"name-help",placeholder:"Nama Layanan"},null,8,["modelValue"])]),s("div",he,[n[8]||(n[8]=s("label",{for:"desc"},"Deskripsi",-1)),t(m,{modelValue:l(v).description,"onUpdate:modelValue":n[2]||(n[2]=d=>l(v).description=d),id:"desc","aria-describedby":"name-help",placeholder:"Deskripsi"},null,8,["modelValue"])]),s("div",we,[n[9]||(n[9]=s("label",{for:"desc"},"Status",-1)),t(l(G),{modelValue:l(v).status,"onUpdate:modelValue":n[3]||(n[3]=d=>l(v).status=d),options:l(p),placeholder:"Pilih Status"},{value:i(d=>[d.value!=null?(x(),P(e,{key:0,value:$(d.value),severity:y(d.value)},null,8,["value","severity"])):N("",!0)]),option:i(d=>[t(e,{value:$(d.option),severity:y(d.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),s("div",Ve,[t(f,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:n[4]||(n[4]=d=>S("on-close"))}),t(f,{type:"button",label:"Simpan",loading:l(V).isLoading,onClick:n[5]||(n[5]=d=>_())},null,8,["loading"])])],64)}}}),ke={class:"flex flex-col items-start gap-2 mb-4"},Ue={class:"flex flex-col gap-2 items-start"},Ce={key:0,class:"relative"},De=["src"],Le={class:"absolute right-0 top-0"},Fe={class:"flex flex-col gap-2 mb-4"},Ae={class:"flex flex-col gap-2 mb-4"},Ne={class:"flex flex-col gap-2"},Ie={class:"flex justify-end gap-2 mt-8"},Be=K({__name:"AddService",emits:["on-close","on-save"],setup(I,{emit:k}){const u=k,S=W(),V=L([0,1]),p=w(""),r=L({image:null,name:"",description:"",status:null});async function v(){await S.addService(r),u("on-save")}function _(b){switch(b){case 0:return"danger";case 1:return"success"}}function y(b){switch(b){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}function $(b){const a=b.files[0];r.image=a;const n=new FileReader;n.onload=async f=>{var g;typeof((g=f.target)==null?void 0:g.result)=="string"&&(p.value=f.target.result)},n.readAsDataURL(a)}return(b,a)=>{const n=q,f=X,g=z,h=J,m=H;return x(),T(Q,null,[s("div",ke,[a[6]||(a[6]=s("label",{for:"name"},"Tambah Gambar",-1)),s("div",Ue,[l(p)?(x(),T("div",Ce,[s("img",{src:l(p),alt:"Image",class:"shadow-md rounded-xl w-full sm:w-64"},null,8,De),s("div",Le,[t(n,{icon:"pi pi-times",rounded:"",outlined:"",onClick:a[0]||(a[0]=e=>p.value="")})])])):N("",!0),t(f,{mode:"basic",onSelect:$,customUpload:"",severity:"secondary",class:"p-button-outlined",maxFileSize:2e6,chooseLabel:l(p)?"Ubah Foto":"Pilih Foto",chooseIcon:"pi pi-image"},null,8,["chooseLabel"])])]),s("div",Fe,[a[7]||(a[7]=s("label",{for:"name"},"Nama Layanan",-1)),t(g,{modelValue:l(r).name,"onUpdate:modelValue":a[1]||(a[1]=e=>l(r).name=e),id:"name","aria-describedby":"name-help",placeholder:"Nama Layanan"},null,8,["modelValue"])]),s("div",Ae,[a[8]||(a[8]=s("label",{for:"desc"},"Deskripsi",-1)),t(h,{modelValue:l(r).description,"onUpdate:modelValue":a[2]||(a[2]=e=>l(r).description=e),id:"desc","aria-describedby":"name-help",placeholder:"Deskripsi"},null,8,["modelValue"])]),s("div",Ne,[a[9]||(a[9]=s("label",{for:"desc"},"Status",-1)),t(l(G),{modelValue:l(r).status,"onUpdate:modelValue":a[3]||(a[3]=e=>l(r).status=e),options:l(V),placeholder:"Pilih Status"},{value:i(e=>[e.value!=null?(x(),P(m,{key:0,value:y(e.value),severity:_(e.value)},null,8,["value","severity"])):N("",!0)]),option:i(e=>[t(m,{value:y(e.option),severity:_(e.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),s("div",Ie,[t(n,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:a[4]||(a[4]=e=>u("on-close"))}),t(n,{type:"button",label:"Simpan",loading:l(S).isLoading,onClick:a[5]||(a[5]=e=>v())},null,8,["loading"])])],64)}}}),Me={class:"card mt-8"},Re={class:"flex flex-col md:flex-row justify-between gap-4"},Oe={class:"flex items-center gap-4 md:order-2 order-1"},Ee={class:"hidden md:flex"},je={class:"flex md:hidden"},He={class:"flex gap-4"},ze=["src","alt"],qe={class:"m-0"},Ge={class:"line-clamp-2"},We={class:"flex gap-4 items-center"},ft=K({__name:"MasterServices",setup(I){const k=se(),u=W(),S=w(),V=L([1,0]),p=w({global:{value:null,matchMode:D.CONTAINS},name:{operator:A.AND,constraints:[{value:null,matchMode:D.STARTS_WITH}]},description:{operator:A.AND,constraints:[{value:null,matchMode:D.STARTS_WITH}]},updated_at:{operator:A.AND,constraints:[{value:null,matchMode:D.DATE_IS}]},status:{operator:A.OR,constraints:[{value:null,matchMode:D.EQUALS}]}}),r=w(0),v=w(null),_=w(!1),y=w(!1);function $(m){return m<1?"danger":"success"}function b(m){return m<1?"Tidak Tersedia":"Tersedia"}async function a(){await u.fetchService(),r.value+=1}const n=ne(()=>u.serviceAll||[]);ie(async()=>{await u.fetchService()});function f(m){return new Date(m).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const g=()=>{S.value.exportCSV()},h=m=>{k.require({target:m.currentTarget,message:"Yakin ingin menghapus layanan ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await u.delete(m),await u.fetchService()},reject:()=>{}})};return(m,e)=>{const d=ve,U=q,Z=me,B=z,ee=pe,C=ce,M=H,te=ue,ae=Be,Y=de,oe=Te,R=re("tooltip");return x(),T(Q,null,[t(d,{breadcrumbItems:[{label:"Master"},{label:"Layanan"}]}),s("div",Me,[e[13]||(e[13]=s("div",{class:"font-semibold text-xl mb-4"},"Data Layanan",-1)),(x(),P(te,{ref_key:"dt",ref:S,key:l(r),value:l(n),paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:l(p),"onUpdate:filters":e[3]||(e[3]=o=>O(p)?p.value=o:null),filterDisplay:"menu",loading:l(u).isLoading,globalFilterFields:["name","description","status","updated_at"],showGridlines:"",scrollable:""},{header:i(()=>[s("div",Re,[t(U,{type:"button",icon:"pi pi-plus",label:"Tambah Layanan",class:"md:order-1 order-2",onClick:e[0]||(e[0]=o=>y.value=!0)}),s("div",Oe,[s("div",Ee,[t(U,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:e[1]||(e[1]=o=>g())})]),s("div",je,[t(U,{type:"button",icon:"pi pi-download",outlined:""})]),t(ee,{class:"w-full md:w-auto"},{default:i(()=>[t(Z,null,{default:i(()=>e[10]||(e[10]=[s("i",{class:"pi pi-search"},null,-1)])),_:1}),t(B,{modelValue:l(p).global.value,"onUpdate:modelValue":e[2]||(e[2]=o=>l(p).global.value=o),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:i(()=>e[11]||(e[11]=[F(" Tidak ada data layanan. ")])),loading:i(()=>e[12]||(e[12]=[F(" Memuat data layanan. Mohon tunggu. ")])),default:i(()=>[t(C,{sortable:"",field:"name",header:"Layanan",class:"min-w-[20rem]"},{body:i(({data:o})=>[s("div",He,[s("img",{src:o.image_url,alt:o.name,width:"32"},null,8,ze),s("p",qe,E(o.name),1)])]),filter:i(({filterModel:o})=>[t(B,{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(C,{sortable:"",field:"description",header:"Deskripsi",class:"min-w-[15rem]"},{body:i(({data:o})=>[j((x(),T("span",Ge,[F(E(o.description),1)])),[[R,o.description,void 0,{bottom:!0}]])]),filter:i(({filterModel:o})=>[t(B,{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,type:"text",placeholder:"Cari Deskripsi"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(C,{sortable:"",header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:i(({data:o})=>[t(M,{value:b(o.status),severity:$(o.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:i(({filterModel:o})=>[t(l(G),{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,options:l(V),placeholder:"Pilih",showClear:""},{value:i(c=>[t(M,{value:b(c.value),severity:$(c.value)},null,8,["value","severity"])]),option:i(c=>[t(M,{value:b(c.option),severity:$(c.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(C,{sortable:"",header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[20rem]"},{body:i(({data:o})=>[F(E(f(o.updated_at)),1)]),filter:i(({filterModel:o})=>[t(l(fe),{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(C,{sortable:"",field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:i(({data:o})=>[s("div",We,[j(t(U,{icon:"pi pi-pencil",severity:"info",text:"",onClick:c=>(v.value=o,_.value=!0)},null,8,["onClick"]),[[R,"Ubah",void 0,{bottom:!0}]]),j(t(U,{icon:"pi pi-trash",severity:"danger",text:"",onClick:c=>h(o.id)},null,8,["onClick"]),[[R,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(l(ye)),t(Y,{visible:l(y),"onUpdate:visible":e[6]||(e[6]=o=>O(y)?y.value=o:null),maximizable:"",modal:"",header:"Tambah Layanan",class:"sm:w-1/2 w-full"},{default:i(()=>[t(ae,{onOnClose:e[4]||(e[4]=o=>y.value=!1),onOnSave:e[5]||(e[5]=o=>(y.value=!1,a()))})]),_:1},8,["visible"]),t(Y,{visible:l(_),"onUpdate:visible":e[9]||(e[9]=o=>O(_)?_.value=o:null),maximizable:"",modal:"",header:"Ubah Layanan",class:"sm:w-1/2 w-full"},{default:i(()=>[t(oe,{service:l(v),onOnClose:e[7]||(e[7]=o=>_.value=!1),onOnSave:e[8]||(e[8]=o=>(_.value=!1,a()))},null,8,["service"])]),_:1},8,["visible"])],64)}}});export{ft as default};
