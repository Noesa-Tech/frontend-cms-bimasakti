import{s as H}from"./index-17ecf855.js";import{s as W}from"./index-93c23dc8.js";import{s as z}from"./index-deef9e19.js";import{s as N}from"./index-2c1f3185.js";import{S as ee}from"./service-1d1740d2.js";import{a0 as ie,a1 as I,a2 as j,p as Y,q as D,X as G,S as q,o as b,c as K,a,h as t,x as s,w as i,t as C,n as B,k as F,N as Q,W as re,v as T,z as E,K as ue,P as M,L as P,Y as k,$ as L}from"./index-f6b298fd.js";import{s as de}from"./index-4941a5df.js";import{s as ce,a as me}from"./index-24bd34c7.js";import{s as pe,a as ve}from"./index-a595e5d6.js";import{_ as ye}from"./TopBreadcrumb-a6563245.js";import{s as fe}from"./index-a7e8ba98.js";import{s as ge}from"./index-ae6d498b.js";import"./index-d19d791a.js";import"./index-e219d200.js";import"./index-1dd55c84.js";import"./index-6e668620.js";import"./index-4f6a2207.js";import"./index-d1d004c3.js";import"./_plugin-vue_export-helper-c27b6911.js";const X=ie("ServiceCategoryStore",{state:()=>({isLoading:!1,serviceCategoryAll:[]}),actions:{async fetchServiceCategory(g,v){this.isLoading=!0;try{const d=await I.get(`/auth/services-problem?status=${g}&isCustom=${v}`);this.serviceCategoryAll=d.data}catch{}finally{this.isLoading=!1}},async addServiceCategory(g){this.isLoading=!0;try{const v=await I.post("/auth/services-problem",g);j("success",v.message)}catch{}finally{this.isLoading=!1}},async updateServiceCategory(g,v){this.isLoading=!0;try{const d=await I.post(`/auth/services-problem/${g}`,v);j("success",d.message)}catch{}finally{this.isLoading=!1}},async delete(g){this.isLoading=!0;try{const v=await I.delete(`/auth/services-problem/${g}`);j("success",v.message)}catch{}finally{this.isLoading=!1}}}}),_e={class:"flex flex-col gap-2 mb-4"},be={class:"flex flex-col gap-2 mb-4"},he={key:0,class:"flex gap-4 items-center"},Se=["src"],$e={class:"m-0"},xe={class:"flex gap-4 items-center"},Ce=["src"],we={class:"m-0"},Ve={class:"flex flex-col gap-2"},Te={class:"flex justify-end gap-2 mt-8"},ke=Y({__name:"EditCategory",props:{detail:{type:Object,required:!0}},emits:["on-close","on-save"],setup(g,{emit:v}){const d=g,h=v,x=ee(),w=X(),c=D([0,1]),m=D({name:d.detail.name,service:{id:d.detail.service.id,name:d.detail.service.name,image_url:d.detail.image_url},status:d.detail.status});async function _(){var u;const n={_method:"PATCH",name:m.name,status:m.status,service_id:(u=m==null?void 0:m.service)==null?void 0:u.id};await w.updateServiceCategory(d.detail.id,n),h("on-save")}function y(n){switch(n){case 0:return"danger";case 1:return"success"}}function S(n){switch(n){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const f=G(()=>x.serviceAll||[]);return q(async()=>{await x.fetchService()}),console.log(m.service),(n,u)=>{const V=z,$=W,r=H;return b(),K(Q,null,[a("div",_e,[u[5]||(u[5]=a("label",{for:"name"},"Nama Kategori",-1)),t(V,{modelValue:s(m).name,"onUpdate:modelValue":u[0]||(u[0]=o=>s(m).name=o),id:"name","aria-describedby":"name-help",placeholder:"Nama Kategori"},null,8,["modelValue"])]),a("div",be,[u[6]||(u[6]=a("label",{for:"desc"},"Layanan",-1)),t(s(N),{modelValue:s(m).service,"onUpdate:modelValue":u[1]||(u[1]=o=>s(m).service=o),value:s(m).service,optionLabel:"name",options:s(f),placeholder:"Pilih Layanan"},{value:i(o=>[o.value!=null?(b(),K("div",he,[a("img",{src:o.value.image_url,alt:"",class:"h-4"},null,8,Se),a("p",$e,C(o.value.name),1)])):B("",!0)]),option:i(o=>[a("div",xe,[a("img",{src:o.option.image_url,alt:"",class:"h-4"},null,8,Ce),a("p",we,C(o.option.name),1)])]),_:1},8,["modelValue","value","options"])]),a("div",Ve,[u[7]||(u[7]=a("label",{for:"desc"},"Status",-1)),t(s(N),{modelValue:s(m).status,"onUpdate:modelValue":u[2]||(u[2]=o=>s(m).status=o),options:s(c),placeholder:"Pilih Status"},{value:i(o=>[o.value!=null?(b(),F($,{key:0,value:S(o.value),severity:y(o.value)},null,8,["value","severity"])):B("",!0)]),option:i(o=>[t($,{value:S(o.option),severity:y(o.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",Te,[t(r,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:u[3]||(u[3]=o=>h("on-close"))}),t(r,{type:"button",label:"Simpan",onClick:u[4]||(u[4]=o=>_())})])],64)}}}),Ue={class:"flex flex-col gap-2 mb-4"},Ae={class:"flex flex-col gap-2 mb-4"},Le={key:0,class:"flex gap-4 items-center"},Ne=["src"],De={class:"m-0"},Ke={class:"flex gap-4 items-center"},Be=["src"],Ie={class:"m-0"},Me={class:"flex flex-col gap-2"},Fe={class:"flex justify-end gap-2 mt-8"},Oe=Y({__name:"AddCategory",emits:["on-close","on-save"],setup(g,{emit:v}){const d=v,h=ee(),x=X(),w=D([0,1]),c=D({name:"",price:0,service:null,status:null});async function m(){var n;const f={name:c.name,status:c.status,service_id:(n=c==null?void 0:c.service)==null?void 0:n.id};await x.addServiceCategory(f),d("on-save")}function _(f){switch(f){case 0:return"danger";case 1:return"success"}}function y(f){switch(f){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const S=G(()=>h.serviceAll||[]);return q(async()=>{await h.fetchService()}),(f,n)=>{const u=z,V=W,$=H;return b(),K(Q,null,[a("div",Ue,[n[5]||(n[5]=a("label",{for:"name"},"Nama Kategori",-1)),t(u,{modelValue:s(c).name,"onUpdate:modelValue":n[0]||(n[0]=r=>s(c).name=r),id:"name","aria-describedby":"name-help",placeholder:"Nama Kategori"},null,8,["modelValue"])]),a("div",Ae,[n[6]||(n[6]=a("label",{for:"desc"},"Layanan",-1)),t(s(N),{modelValue:s(c).service,"onUpdate:modelValue":n[1]||(n[1]=r=>s(c).service=r),options:s(S),placeholder:"Pilih Layanan"},{value:i(r=>[r.value!=null?(b(),K("div",Le,[a("img",{src:r.value.image_url,alt:"",class:"h-4"},null,8,Ne),a("p",De,C(r.value.name),1)])):B("",!0)]),option:i(r=>[a("div",Ke,[a("img",{src:r.option.image_url,alt:"",class:"h-4"},null,8,Be),a("p",Ie,C(r.option.name),1)])]),_:1},8,["modelValue","options"])]),a("div",Me,[n[7]||(n[7]=a("label",{for:"desc"},"Status",-1)),t(s(N),{modelValue:s(c).status,"onUpdate:modelValue":n[2]||(n[2]=r=>s(c).status=r),options:s(w),placeholder:"Pilih Status"},{value:i(r=>[r.value!=null?(b(),F(V,{key:0,value:y(r.value),severity:_(r.value)},null,8,["value","severity"])):B("",!0)]),option:i(r=>[t(V,{value:y(r.option),severity:_(r.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",Fe,[t($,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:n[3]||(n[3]=r=>d("on-close"))}),t($,{type:"button",label:"Simpan",onClick:n[4]||(n[4]=r=>m())})])],64)}}}),Re={class:"card mt-8"},je={class:"flex flex-col md:flex-row justify-between gap-4"},Ee={class:"flex items-center gap-4 md:order-2 order-1"},He={class:"hidden md:flex"},We={class:"flex md:hidden"},ze={class:"flex flex-col items-center gap-2"},Ye=["alt","src"],Ge={class:"flex gap-4 items-center"},pt=Y({__name:"MasterCategory",setup(g){const v=re(),d=X(),h=T(),x=T(null),w=T(0),c=T({global:{value:null,matchMode:k.CONTAINS},"service.name":{operator:L.AND,constraints:[{value:null,matchMode:k.STARTS_WITH}]},price:{operator:L.AND,constraints:[{value:null,matchMode:k.STARTS_WITH}]},name:{operator:L.AND,constraints:[{value:null,matchMode:k.STARTS_WITH}]},updated_at:{operator:L.AND,constraints:[{value:null,matchMode:k.DATE_IS}]},status:{operator:L.OR,constraints:[{value:null,matchMode:k.EQUALS}]}}),m=D([1,0]),_=T(!1),y=T(!1);function S(o){switch(o){case 0:return"danger";case 1:return"success"}}function f(o){switch(o){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}function n(o){return new Date(o).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const u=o=>{h.value.exportCSV()},V=o=>{v.require({target:o.currentTarget,message:"Yakin ingin menghapus service problem ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await d.delete(o),await d.fetchServiceCategory("",0)},reject:()=>{}})};async function $(){await d.fetchServiceCategory("",0),w.value+=1}const r=G(()=>d.serviceCategoryAll||[]);return q(async()=>{await d.fetchServiceCategory("",0)}),(o,l)=>{const te=ye,U=H,ae=pe,O=z,se=ve,A=me,R=W,oe=ce,le=Oe,J=de,ne=ke,Z=ue("tooltip");return b(),K(Q,null,[t(te,{breadcrumbItems:[{label:"Master"},{label:"Kategori"}]}),a("div",Re,[l[13]||(l[13]=a("div",{class:"font-semibold text-xl mb-4"},"Data Kategori",-1)),(b(),F(oe,{ref_key:"dt",ref:h,key:s(w),value:s(r),rowGroupMode:"rowspan",groupRowsBy:"service.name",paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:s(c),"onUpdate:filters":l[3]||(l[3]=e=>E(c)?c.value=e:null),filterDisplay:"menu",loading:s(d).isLoading,globalFilterFields:["service.name","name","price","status","updated_at"],showGridlines:""},{header:i(()=>[a("div",je,[t(U,{type:"button",icon:"pi pi-plus",label:"Tambah Kategori",class:"md:order-1 order-2",onClick:l[0]||(l[0]=e=>y.value=!0)}),a("div",Ee,[a("div",He,[t(U,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:l[1]||(l[1]=e=>u(e))})]),a("div",We,[t(U,{type:"button",icon:"pi pi-download",outlined:""})]),t(se,{class:"w-full md:w-auto"},{default:i(()=>[t(ae,null,{default:i(()=>l[10]||(l[10]=[a("i",{class:"pi pi-search"},null,-1)])),_:1}),t(O,{modelValue:s(c).global.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s(c).global.value=e),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:i(()=>l[11]||(l[11]=[M(" Tidak ada data Kategori. ")])),loading:i(()=>l[12]||(l[12]=[M(" Memuat data Kategori. Mohon tunggu. ")])),default:i(()=>[t(A,{field:"service.name",header:"Layanan"},{body:i(({data:e})=>[a("div",ze,[a("img",{alt:e.service.name,src:e.image_url,width:"32",style:{"vertical-align":"middle"}},null,8,Ye),a("span",null,C(e.service.name),1)])]),filter:i(({filterModel:e})=>[t(O,{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(A,{field:"name",header:"Nama Kategori",class:"min-w-[15rem]"},{body:i(({data:e})=>[M(C(e.name),1)]),filter:i(({filterModel:e})=>[t(O,{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(A,{header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:i(({data:e})=>[t(R,{value:f(e.status),severity:S(e.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:i(({filterModel:e})=>[t(s(N),{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,options:s(m),placeholder:"Pilih",showClear:""},{value:i(p=>[p.value?(b(),F(R,{key:0,value:f(p.value),severity:S(p.value)},null,8,["value","severity"])):B("",!0)]),option:i(p=>[t(R,{value:f(p.option),severity:S(p.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(A,{header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[12rem]"},{body:i(({data:e})=>[M(C(n(e.updated_at)),1)]),filter:i(({filterModel:e})=>[t(s(fe),{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(A,{field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:i(({data:e})=>[a("div",Ge,[P(t(U,{icon:"pi pi-pencil",severity:"info",text:"",onClick:p=>(x.value=e,_.value=!0)},null,8,["onClick"]),[[Z,"Ubah",void 0,{bottom:!0}]]),P(t(U,{icon:"pi pi-trash",severity:"danger",text:"",onClick:p=>V(e.id)},null,8,["onClick"]),[[Z,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(s(ge)),t(J,{visible:s(y),"onUpdate:visible":l[6]||(l[6]=e=>E(y)?y.value=e:null),maximizable:"",modal:"",header:"Tambah Kategori",class:"sm:w-1/2 w-full"},{default:i(()=>[t(le,{onOnClose:l[4]||(l[4]=e=>y.value=!1),onOnSave:l[5]||(l[5]=e=>(y.value=!1,$()))})]),_:1},8,["visible"]),t(J,{visible:s(_),"onUpdate:visible":l[9]||(l[9]=e=>E(_)?_.value=e:null),maximizable:"",modal:"",header:"Ubah Kategori",class:"sm:w-1/2 w-full"},{default:i(()=>[t(ne,{detail:s(x),onOnClose:l[7]||(l[7]=e=>_.value=!1),onOnSave:l[8]||(l[8]=e=>(_.value=!1,$()))},null,8,["detail"])]),_:1},8,["visible"])],64)}}});export{pt as default};
