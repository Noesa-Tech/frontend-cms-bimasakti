import{s as z}from"./index-ca6d5153.js";import{s as te}from"./index-3ef02de6.js";import{s as Q}from"./index-a8581030.js";import{s as ae}from"./index-dd710192.js";import{s as Y}from"./index-558407c9.js";import{s as H}from"./index-7101df72.js";import{S as ie}from"./serviceCategory-d10975f9.js";import{Y as se,$ as M,a0 as j,d as G,r as B,P as q,o as w,c as R,b as t,f as l,e as n,J as r,t as y,H as F,E as O,L as J,S as re,a as N,i as W,z as de,N as A,D as ee,W as U,X as K}from"./index-68fdcb85.js";import{s as ue}from"./index-ce7a88b9.js";import{s as me,a as ce}from"./index-4588d029.js";import{s as pe,a as ve}from"./index-88605b24.js";import{_ as be}from"./TopBreadcrumb-5dc1b1aa.js";import{s as ge}from"./index-a2348ffa.js";import{s as fe}from"./index-1607d1ac.js";import"./index-ae0fa429.js";import"./index-620ea49b.js";import"./index-89e3ea54.js";import"./index-83a51394.js";import"./index-23c28282.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-9f6ae4e9.js";const X=se("ServiceSubCategory",{state:()=>({isLoading:!1,serviceSubCategory:[]}),actions:{async getServiceSubCategory(){this.isLoading=!0;try{const V=await M.get("/auth/services-sub-problem");this.serviceSubCategory=V.data}catch{}finally{this.isLoading=!1}},async createServiceSubCategory(V){this.isLoading=!0;try{const v=await M.post("/auth/services-sub-problem",V);j("success",v.message)}catch{}finally{this.isLoading=!1}},async updateServiceSubCategory(V,v){this.isLoading=!0;try{const b=await M.post(`/auth/services-sub-problem/${V}`,v);j("success",b.message)}catch{}finally{this.isLoading=!1}},async delete(V){this.isLoading=!0;try{const v=await M.delete(`/auth/services-sub-problem/${V}`);j("success",v.message)}catch{}finally{this.isLoading=!1}}}}),ye={class:"flex flex-col gap-2 mb-4"},_e={class:"flex flex-col gap-2 mb-4"},Se={key:0,class:"flex gap-4 items-center"},xe=["alt","src"],Ve={class:"m-0"},$e={class:"m-0 text-muted-color text-sm"},he={class:"flex gap-4 items-center"},Ce=["alt","src"],we={class:"m-0"},Te={class:"m-0 text-muted-color text-sm"},Ue={class:"flex flex-col gap-2 mb-4"},ke={class:"flex flex-col gap-2 mb-4"},De={class:"flex flex-col gap-2"},Ie={class:"flex justify-end gap-2 mt-8"},Ne=G({__name:"EditSubCategory",props:{data:{type:Object,required:!0}},emits:["on-close","on-save"],setup(V,{emit:v}){const b=V,T=v,C=ie(),k=X(),u=B([0,1]),d=B({problem_id:{id:b.data.service_problem.id,name:b.data.service_problem.name,image_url:b.data.image_url},name:b.data.name,description:b.data.description,status:b.data.status,price:b.data.price});async function h(){var s;const o={_method:"PATCH",problem_id:(s=d==null?void 0:d.problem_id)==null?void 0:s.id,name:d.name,description:d.description,status:d.status,price:d.price};k.updateServiceSubCategory(b.data.id,o),T("on-save")}function $(o){switch(o){case 0:return"danger";case 1:return"success"}}function f(o){switch(o){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}return q(async()=>{await C.fetchServiceCategory("",0)}),(o,s)=>{const L=Y,D=ae,I=Q,g=te,e=z;return w(),R(J,null,[t("div",ye,[s[7]||(s[7]=t("label",{for:"name"},"Nama Sub Kategori",-1)),l(L,{modelValue:n(d).name,"onUpdate:modelValue":s[0]||(s[0]=i=>n(d).name=i),id:"name","aria-describedby":"name-help",placeholder:"Nama Sub Kategori"},null,8,["modelValue"])]),t("div",_e,[s[8]||(s[8]=t("label",{for:"desc"},"Kategori",-1)),l(n(H),{modelValue:n(d).problem_id,"onUpdate:modelValue":s[1]||(s[1]=i=>n(d).problem_id=i),options:n(C).serviceCategoryAll,placeholder:"Pilih Layanan"},{value:r(i=>{var c,_,p,S,x;return[i.value!=null?(w(),R("div",Se,[t("img",{alt:(_=(c=i==null?void 0:i.value)==null?void 0:c.service)==null?void 0:_.name,src:i.value.image_url,class:"align-middle w-10"},null,8,xe),t("div",null,[t("h6",Ve,y((p=i==null?void 0:i.value)==null?void 0:p.name),1),t("p",$e,y((x=(S=i==null?void 0:i.value)==null?void 0:S.service)==null?void 0:x.name),1)])])):F("",!0)]}),option:r(i=>{var c,_,p,S,x;return[t("div",he,[t("img",{alt:(_=(c=i==null?void 0:i.option)==null?void 0:c.service)==null?void 0:_.name,src:(p=i==null?void 0:i.option)==null?void 0:p.image_url,class:"align-middle w-10"},null,8,Ce),t("div",null,[t("h6",we,y(i.option.name),1),t("p",Te,y((x=(S=i==null?void 0:i.option)==null?void 0:S.service)==null?void 0:x.name),1)])])]}),_:1},8,["modelValue","options"])]),t("div",Ue,[s[9]||(s[9]=t("label",{for:"name"},"Harga",-1)),l(D,{modelValue:n(d).price,"onUpdate:modelValue":s[2]||(s[2]=i=>n(d).price=i),type:"text",placeholder:"Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue"])]),t("div",ke,[s[10]||(s[10]=t("label",{for:"desc"},"Status",-1)),l(n(H),{modelValue:n(d).status,"onUpdate:modelValue":s[3]||(s[3]=i=>n(d).status=i),options:n(u),placeholder:"Pilih Status"},{value:r(i=>[i.value!=null?(w(),O(I,{key:0,value:f(i.value),severity:$(i.value)},null,8,["value","severity"])):F("",!0)]),option:r(i=>[l(I,{value:f(i.option),severity:$(i.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),t("div",De,[s[11]||(s[11]=t("label",{for:"desc"},"Description",-1)),l(g,{modelValue:n(d).description,"onUpdate:modelValue":s[4]||(s[4]=i=>n(d).description=i),rows:"5",cols:"30"},null,8,["modelValue"])]),t("div",Ie,[l(e,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:s[5]||(s[5]=i=>T("on-close"))}),l(e,{type:"button",label:"Simpan",disabled:o.$isQueryInvalid(n(d)),onClick:s[6]||(s[6]=i=>h())},null,8,["disabled"])])],64)}}}),Ae={class:"flex flex-col gap-2 mb-4"},Ke={class:"flex flex-col gap-2 mb-4"},Le={key:0,class:"flex gap-4 items-center"},He=["alt","src"],Be={class:"m-0"},Re={class:"m-0 text-muted-color text-sm"},Fe={class:"flex gap-4 items-center"},Me=["alt","src"],Oe={class:"m-0"},Ee={class:"m-0 text-muted-color text-sm"},je={class:"flex flex-col gap-2 mb-4"},We={class:"flex flex-col gap-2 mb-4"},ze={class:"flex flex-col gap-2"},Qe={class:"flex justify-end gap-2 mt-8"},Ye=G({__name:"AddSubCategory",emits:["on-close","on-save"],setup(V,{emit:v}){const b=v,T=ie(),C=X(),k=B([0,1]),u=B({problem_id:null,name:"",description:"",status:1,price:0});async function d(){var o;const f={problem_id:(o=u==null?void 0:u.problem_id)==null?void 0:o.id,name:u.name,description:u.description,status:u.status,price:u.price};C.createServiceSubCategory(f),b("on-save")}function h(f){switch(f){case 0:return"danger";case 1:return"success"}}function $(f){switch(f){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}return q(async()=>{await T.fetchServiceCategory("",0)}),(f,o)=>{const s=Y,L=ae,D=Q,I=te,g=z;return w(),R(J,null,[t("div",Ae,[o[7]||(o[7]=t("label",{for:"name"},"Nama Sub Kategori",-1)),l(s,{modelValue:n(u).name,"onUpdate:modelValue":o[0]||(o[0]=e=>n(u).name=e),id:"name","aria-describedby":"name-help",placeholder:"Nama Sub Kategori"},null,8,["modelValue"])]),t("div",Ke,[o[8]||(o[8]=t("label",{for:"desc"},"Kategori",-1)),l(n(H),{modelValue:n(u).problem_id,"onUpdate:modelValue":o[1]||(o[1]=e=>n(u).problem_id=e),options:n(T).serviceCategoryAll,placeholder:"Pilih Layanan"},{value:r(e=>{var i,c,_,p,S;return[e.value!=null?(w(),R("div",Le,[t("img",{alt:(c=(i=e==null?void 0:e.value)==null?void 0:i.service)==null?void 0:c.name,src:e.value.image_url,class:"align-middle w-10"},null,8,He),t("div",null,[t("h6",Be,y((_=e==null?void 0:e.value)==null?void 0:_.name),1),t("p",Re,y((S=(p=e==null?void 0:e.value)==null?void 0:p.service)==null?void 0:S.name),1)])])):F("",!0)]}),option:r(e=>{var i,c,_,p,S;return[t("div",Fe,[t("img",{alt:(c=(i=e==null?void 0:e.option)==null?void 0:i.service)==null?void 0:c.name,src:(_=e==null?void 0:e.option)==null?void 0:_.image_url,class:"align-middle w-10"},null,8,Me),t("div",null,[t("h6",Oe,y(e.option.name),1),t("p",Ee,y((S=(p=e==null?void 0:e.option)==null?void 0:p.service)==null?void 0:S.name),1)])])]}),_:1},8,["modelValue","options"])]),t("div",je,[o[9]||(o[9]=t("label",{for:"name"},"Harga",-1)),l(L,{modelValue:n(u).price,"onUpdate:modelValue":o[2]||(o[2]=e=>n(u).price=e),type:"text",placeholder:"Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue"])]),t("div",We,[o[10]||(o[10]=t("label",{for:"desc"},"Status",-1)),l(n(H),{modelValue:n(u).status,"onUpdate:modelValue":o[3]||(o[3]=e=>n(u).status=e),options:n(k),placeholder:"Pilih Status"},{value:r(e=>[e.value!=null?(w(),O(D,{key:0,value:$(e.value),severity:h(e.value)},null,8,["value","severity"])):F("",!0)]),option:r(e=>[l(D,{value:$(e.option),severity:h(e.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),t("div",ze,[o[11]||(o[11]=t("label",{for:"desc"},"Description",-1)),l(I,{modelValue:n(u).description,"onUpdate:modelValue":o[4]||(o[4]=e=>n(u).description=e),rows:"5",cols:"30"},null,8,["modelValue"])]),t("div",Qe,[l(g,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:o[5]||(o[5]=e=>b("on-close"))}),l(g,{type:"button",label:"Simpan",disabled:f.$isQueryInvalid(n(u)),onClick:o[6]||(o[6]=e=>d())},null,8,["disabled"])])],64)}}}),Ge={class:"card mt-8"},qe={class:"flex flex-col md:flex-row justify-between gap-4"},Je={class:"flex items-center gap-4 md:order-2 order-1"},Xe={class:"hidden md:flex"},Ze={class:"flex md:hidden"},Pe={class:"flex gap-4 items-center"},et=["alt","src"],tt={class:"m-0"},at={class:"m-0 text-muted-color text-sm"},it={class:"flex gap-4 items-center"},Ct=G({__name:"MasterSubCategory",setup(V){const v=X(),b=re(),T=N(),C=N({global:{value:null,matchMode:U.CONTAINS},"service_problem.name":{operator:K.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},name:{operator:K.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},description:{operator:K.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},price:{operator:K.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},updated_at:{operator:K.AND,constraints:[{value:null,matchMode:U.DATE_IS}]},status:{operator:K.OR,constraints:[{value:null,matchMode:U.EQUALS}]}}),k=N(null),u=B([1,0]),d=N(0),h=N(!1),$=N(!1);function f(g){switch(g){case 0:return"danger";case 1:return"success"}}function o(g){switch(g){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}async function s(){await v.getServiceSubCategory(),d.value+=1}q(async()=>{await s()});function L(g){return new Date(g).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const D=g=>{T.value.exportCSV()},I=g=>{b.require({target:g.currentTarget,message:"Yakin ingin menghapus sub kategori ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await v.delete(g),await s()},reject:()=>{}})};return(g,e)=>{const i=be,c=z,_=pe,p=Y,S=ve,x=ce,E=Q,le=me,ne=Ye,Z=ue,oe=Ne,P=de("tooltip");return w(),R(J,null,[l(i,{breadcrumbItems:[{label:"Master"},{label:"Sub Kategori"}]}),t("div",Ge,[e[13]||(e[13]=t("div",{class:"font-semibold text-xl mb-4"},"Data Sub Kategori",-1)),(w(),O(le,{ref_key:"dt",ref:T,key:n(d),value:n(v).serviceSubCategory,rowGroupMode:"rowspan",groupRowsBy:"service_problem.name",paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:n(C),"onUpdate:filters":e[3]||(e[3]=a=>W(C)?C.value=a:null),filterDisplay:"menu",loading:n(v).isLoading,globalFilterFields:["service_problem.name","name","description","price","status","updated_at"],showGridlines:""},{header:r(()=>[t("div",qe,[l(c,{type:"button",icon:"pi pi-plus",label:"Tambah Sub Kategori",class:"md:order-1 order-2",onClick:e[0]||(e[0]=a=>$.value=!0)}),t("div",Je,[t("div",Xe,[l(c,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:e[1]||(e[1]=a=>D(a))})]),t("div",Ze,[l(c,{type:"button",icon:"pi pi-download",outlined:""})]),l(S,{class:"w-full md:w-auto"},{default:r(()=>[l(_,null,{default:r(()=>e[10]||(e[10]=[t("i",{class:"pi pi-search"},null,-1)])),_:1}),l(p,{modelValue:n(C).global.value,"onUpdate:modelValue":e[2]||(e[2]=a=>n(C).global.value=a),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:r(()=>e[11]||(e[11]=[A(" Tidak ada data Sub Kategori. ")])),loading:r(()=>e[12]||(e[12]=[A(" Memuat data Sub Kategori. Mohon tunggu. ")])),default:r(()=>[l(x,{field:"service_problem.name",header:"Kategori",class:"min-w-[20rem]"},{body:r(({data:a})=>[t("div",Pe,[t("img",{alt:a.service_problem.service.name,src:a.image_url,class:"align-middle w-10"},null,8,et),t("div",null,[t("h6",tt,y(a.isCustom>0?"Custom Request":a.service_problem.name),1),t("p",at,y(a.service_problem.service.name),1)])])]),filter:r(({filterModel:a})=>[l(p,{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,type:"text",placeholder:"Cari Kategori"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(x,{field:"name",header:"Sub Kategori",class:"min-w-[15rem]"},{body:r(({data:a})=>[A(y(a.name),1)]),filter:r(({filterModel:a})=>[l(p,{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,type:"text",placeholder:"Cari Sub Kategori"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(x,{field:"description",header:"Deskripsi",class:"min-w-[25rem]"},{body:r(({data:a})=>[A(y(a.description),1)]),filter:r(({filterModel:a})=>[l(p,{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,type:"text",placeholder:"Cari Deskripsi"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(x,{field:"price",header:"Harga",class:"min-w-[25rem]"},{body:r(({data:a})=>[A(" Rp"+y(g.formatPrice(a.price)),1)]),filter:r(({filterModel:a})=>[l(p,{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,type:"text",placeholder:"Cari Harga"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(x,{header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:r(({data:a})=>[l(E,{value:o(a.status),severity:f(a.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:r(({filterModel:a})=>[l(n(H),{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,options:n(u),placeholder:"Pilih",showClear:""},{value:r(m=>[m.value?(w(),O(E,{key:0,value:o(m.value),severity:f(m.value)},null,8,["value","severity"])):F("",!0)]),option:r(m=>[l(E,{value:o(m.option),severity:f(m.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),l(x,{header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[12rem]"},{body:r(({data:a})=>[A(y(L(a.updated_at)),1)]),filter:r(({filterModel:a})=>[l(n(ge),{modelValue:a.value,"onUpdate:modelValue":m=>a.value=m,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(x,{field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:r(({data:a})=>[t("div",it,[ee(l(c,{icon:"pi pi-pencil",severity:"info",text:"",onClick:m=>(k.value=a,h.value=!0)},null,8,["onClick"]),[[P,"Ubah",void 0,{bottom:!0}]]),ee(l(c,{icon:"pi pi-trash",severity:"danger",text:"",onClick:m=>I(a.id)},null,8,["onClick"]),[[P,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),l(n(fe)),l(Z,{visible:n($),"onUpdate:visible":e[6]||(e[6]=a=>W($)?$.value=a:null),maximizable:"",modal:"",header:"Tambah Sub Kategori",class:"sm:w-1/2 w-full"},{default:r(()=>[l(ne,{onOnClose:e[4]||(e[4]=a=>$.value=!1),onOnSave:e[5]||(e[5]=a=>($.value=!1,s()))})]),_:1},8,["visible"]),l(Z,{visible:n(h),"onUpdate:visible":e[9]||(e[9]=a=>W(h)?h.value=a:null),maximizable:"",modal:"",header:"Ubah Sub Kategori",class:"sm:w-1/2 w-full"},{default:r(()=>[l(oe,{data:n(k),onOnClose:e[7]||(e[7]=a=>h.value=!1),onOnSave:e[8]||(e[8]=a=>(h.value=!1,s()))},null,8,["data"])]),_:1},8,["visible"])],64)}}});export{Ct as default};
