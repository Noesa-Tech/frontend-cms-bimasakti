import{s as J}from"./index-7bd47231.js";import{s as Y}from"./index-800d93a6.js";import{s as j}from"./index-e3cf2d15.js";import{s as X}from"./index-fdd07a0c.js";import{s as z}from"./index-1222cd2e.js";import{s as q}from"./index-aee37d07.js";import{S as W}from"./service-76bdfe8d.js";import{d as G,r as F,a as h,Q as oe,o as S,c as k,b as s,e as o,f as t,H as B,J as i,E as K,L as P,S as se,V as ne,P as ie,i as E,z as re,N,t as I,D as H,W as U,X as D}from"./index-e9011b10.js";import{s as de}from"./index-363a06c1.js";import{s as ue,a as me}from"./index-c5615f1c.js";import{s as ce,a as pe}from"./index-466e3789.js";import{_ as ve}from"./TopBreadcrumb-d6cf2909.js";import{s as fe}from"./index-5b3cb1a0.js";import{s as be}from"./index-d38e5885.js";import"./index-3365eae6.js";import"./index-9cf187c5.js";import"./index-df72a27e.js";import"./index-2e3eafec.js";import"./index-16b669bc.js";import"./index-b371f556.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./index-e449ca1b.js";const ye={class:"flex flex-col items-start gap-2 mb-4"},_e={class:"flex flex-col gap-2 items-start"},ge={key:0,class:"relative"},xe=["src"],Se={class:"absolute right-0 top-0"},$e={class:"flex flex-col gap-2 mb-4"},Ve={class:"flex flex-col gap-2 mb-4"},he={class:"flex flex-col gap-2 mb-4"},we={class:"flex flex-col gap-2"},Te={class:"flex justify-end gap-2 mt-8"},Ue=G({__name:"EditService",props:{service:{type:Object,required:!0}},emits:["on-close","on-save"],setup(R,{emit:C}){const m=R,$=C,w=W(),v=F([0,1]),r=h(null),c=F({name:m.service.name,title_page:m.service.title_page,description:m.service.description,status:m.service.status});async function _(){const l={...c,_method:"PATCH"};await w.updateServcice(m.service.id,l),$("on-save")}function b(l){switch(l){case 0:return"danger";case 1:return"success"}}function V(l){switch(l){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}function y(l){const n=l.files[0];c.image=n;const f=new FileReader;f.onload=async g=>{var x;r.value=(x=g.target)==null?void 0:x.result},f.readAsDataURL(n)}return oe(()=>m.service,l=>{l!=null&&l.image_url&&(r.value=l.image_url)},{immediate:!0}),(l,n)=>{const f=z,g=X,x=j,p=Y,e=J;return S(),k(P,null,[s("div",ye,[n[7]||(n[7]=s("label",{for:"name"},"Ubah Gambar",-1)),s("div",_e,[o(r)?(S(),k("div",ge,[s("img",{src:o(r),alt:"Image",class:"shadow-md rounded-xl w-full sm:w-64"},null,8,xe),s("div",Se,[t(f,{icon:"pi pi-times",rounded:"",outlined:"",onClick:n[0]||(n[0]=d=>r.value=null)})])])):B("",!0),t(g,{mode:"basic",onSelect:y,customUpload:"",severity:"secondary",class:"p-button-outlined",maxFileSize:1e6,chooseLabel:o(r)?"Ubah Foto":"Pilih Foto",chooseIcon:"pi pi-image"},null,8,["chooseLabel"])])]),s("div",$e,[n[8]||(n[8]=s("label",{for:"name"},"Nama Layanan",-1)),t(x,{modelValue:o(c).name,"onUpdate:modelValue":n[1]||(n[1]=d=>o(c).name=d),id:"name","aria-describedby":"name-help",placeholder:"Nama Layanan"},null,8,["modelValue"])]),s("div",Ve,[n[9]||(n[9]=s("label",{for:"name"},"Judul Layanan",-1)),t(x,{modelValue:o(c).title_page,"onUpdate:modelValue":n[2]||(n[2]=d=>o(c).title_page=d),id:"name","aria-describedby":"name-help",placeholder:"Judul Layanan"},null,8,["modelValue"])]),s("div",he,[n[10]||(n[10]=s("label",{for:"desc"},"Deskripsi",-1)),t(p,{modelValue:o(c).description,"onUpdate:modelValue":n[3]||(n[3]=d=>o(c).description=d),id:"desc","aria-describedby":"name-help",placeholder:"Deskripsi"},null,8,["modelValue"])]),s("div",we,[n[11]||(n[11]=s("label",{for:"desc"},"Status",-1)),t(o(q),{modelValue:o(c).status,"onUpdate:modelValue":n[4]||(n[4]=d=>o(c).status=d),options:o(v),placeholder:"Pilih Status"},{value:i(d=>[d.value!=null?(S(),K(e,{key:0,value:V(d.value),severity:b(d.value)},null,8,["value","severity"])):B("",!0)]),option:i(d=>[t(e,{value:V(d.option),severity:b(d.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),s("div",Te,[t(f,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:n[5]||(n[5]=d=>$("on-close"))}),t(f,{type:"button",label:"Simpan",loading:o(w).isLoading,onClick:n[6]||(n[6]=d=>_())},null,8,["loading"])])],64)}}}),ke={class:"flex flex-col items-start gap-2 mb-4"},Ce={class:"flex flex-col gap-2 items-start"},Le={key:0,class:"relative"},De=["src"],Fe={class:"absolute right-0 top-0"},Ae={class:"flex flex-col gap-2 mb-4"},Ne={class:"flex flex-col gap-2 mb-4"},Ie={class:"flex flex-col gap-2 mb-4"},Be={class:"flex flex-col gap-2"},Re={class:"flex justify-end gap-2 mt-8"},Me=G({__name:"AddService",emits:["on-close","on-save"],setup(R,{emit:C}){const m=C,$=W(),w=F([0,1]),v=h(""),r=F({image:null,name:"",title_page:null,description:"",status:null});async function c(){await $.addService(r),m("on-save")}function _(y){switch(y){case 0:return"danger";case 1:return"success"}}function b(y){switch(y){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}function V(y){const l=y.files[0];r.image=l;const n=new FileReader;n.onload=async f=>{var g;typeof((g=f.target)==null?void 0:g.result)=="string"&&(v.value=f.target.result)},n.readAsDataURL(l)}return(y,l)=>{const n=z,f=X,g=j,x=Y,p=J;return S(),k(P,null,[s("div",ke,[l[7]||(l[7]=s("label",{for:"name"},"Tambah Gambar",-1)),s("div",Ce,[o(v)?(S(),k("div",Le,[s("img",{src:o(v),alt:"Image",class:"shadow-md rounded-xl w-full sm:w-64"},null,8,De),s("div",Fe,[t(n,{icon:"pi pi-times",rounded:"",outlined:"",onClick:l[0]||(l[0]=e=>v.value="")})])])):B("",!0),t(f,{mode:"basic",onSelect:V,customUpload:"",severity:"secondary",class:"p-button-outlined",maxFileSize:2e6,chooseLabel:o(v)?"Ubah Foto":"Pilih Foto",chooseIcon:"pi pi-image"},null,8,["chooseLabel"])])]),s("div",Ae,[l[8]||(l[8]=s("label",{for:"name"},"Nama Layanan",-1)),t(g,{modelValue:o(r).name,"onUpdate:modelValue":l[1]||(l[1]=e=>o(r).name=e),id:"name","aria-describedby":"name-help",placeholder:"Nama Layanan"},null,8,["modelValue"])]),s("div",Ne,[l[9]||(l[9]=s("label",{for:"name"},"Judul Layanan",-1)),t(g,{modelValue:o(r).title_page,"onUpdate:modelValue":l[2]||(l[2]=e=>o(r).title_page=e),id:"name","aria-describedby":"name-help",placeholder:"Judul Layanan"},null,8,["modelValue"])]),s("div",Ie,[l[10]||(l[10]=s("label",{for:"desc"},"Deskripsi",-1)),t(x,{modelValue:o(r).description,"onUpdate:modelValue":l[3]||(l[3]=e=>o(r).description=e),id:"desc","aria-describedby":"name-help",placeholder:"Deskripsi"},null,8,["modelValue"])]),s("div",Be,[l[11]||(l[11]=s("label",{for:"desc"},"Status",-1)),t(o(q),{modelValue:o(r).status,"onUpdate:modelValue":l[4]||(l[4]=e=>o(r).status=e),options:o(w),placeholder:"Pilih Status"},{value:i(e=>[e.value!=null?(S(),K(p,{key:0,value:b(e.value),severity:_(e.value)},null,8,["value","severity"])):B("",!0)]),option:i(e=>[t(p,{value:b(e.option),severity:_(e.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),s("div",Re,[t(n,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:l[5]||(l[5]=e=>m("on-close"))}),t(n,{type:"button",label:"Simpan",loading:o($).isLoading,onClick:l[6]||(l[6]=e=>c())},null,8,["loading"])])],64)}}}),Oe={class:"card mt-8"},Ee={class:"flex flex-col md:flex-row justify-between gap-4"},He={class:"flex items-center gap-4 md:order-2 order-1"},Je={class:"hidden md:flex"},je={class:"flex md:hidden"},ze={class:"flex gap-4"},qe=["src","alt"],We={class:"m-0"},Ge={class:"line-clamp-2"},Ke={class:"flex gap-4 items-center"},yt=G({__name:"MasterServices",setup(R){const C=se(),m=W(),$=h(),w=F([1,0]),v=h({global:{value:null,matchMode:U.CONTAINS},name:{operator:D.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},title:{operator:D.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},description:{operator:D.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},updated_at:{operator:D.AND,constraints:[{value:null,matchMode:U.DATE_IS}]},status:{operator:D.OR,constraints:[{value:null,matchMode:U.EQUALS}]}}),r=h(0),c=h(null),_=h(!1),b=h(!1);function V(p){return p<1?"danger":"success"}function y(p){return p<1?"Tidak Tersedia":"Tersedia"}async function l(){await m.fetchService(),r.value+=1}const n=ne(()=>m.serviceAll||[]);ie(async()=>{await m.fetchService()});function f(p){return new Date(p).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const g=()=>{$.value.exportCSV()},x=p=>{C.require({target:p.currentTarget,message:"Yakin ingin menghapus layanan ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await m.delete(p),await m.fetchService()},reject:()=>{}})};return(p,e)=>{const d=ve,L=z,Z=ce,A=j,ee=pe,T=me,M=J,te=ue,ae=Me,Q=de,le=Ue,O=re("tooltip");return S(),k(P,null,[t(d,{breadcrumbItems:[{label:"Master"},{label:"Layanan"}]}),s("div",Oe,[e[13]||(e[13]=s("div",{class:"font-semibold text-xl mb-4"},"Data Layanan",-1)),(S(),K(te,{ref_key:"dt",ref:$,key:o(r),value:o(n),paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:o(v),"onUpdate:filters":e[3]||(e[3]=a=>E(v)?v.value=a:null),filterDisplay:"menu",loading:o(m).isLoading,globalFilterFields:["name","title","description","status","updated_at"],showGridlines:"",scrollable:""},{header:i(()=>[s("div",Ee,[t(L,{type:"button",icon:"pi pi-plus",label:"Tambah Layanan",class:"md:order-1 order-2",onClick:e[0]||(e[0]=a=>b.value=!0)}),s("div",He,[s("div",Je,[t(L,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:e[1]||(e[1]=a=>g())})]),s("div",je,[t(L,{type:"button",icon:"pi pi-download",outlined:""})]),t(ee,{class:"w-full md:w-auto"},{default:i(()=>[t(Z,null,{default:i(()=>e[10]||(e[10]=[s("i",{class:"pi pi-search"},null,-1)])),_:1}),t(A,{modelValue:o(v).global.value,"onUpdate:modelValue":e[2]||(e[2]=a=>o(v).global.value=a),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:i(()=>e[11]||(e[11]=[N(" Tidak ada data layanan. ")])),loading:i(()=>e[12]||(e[12]=[N(" Memuat data layanan. Mohon tunggu. ")])),default:i(()=>[t(T,{sortable:"",field:"name",header:"Layanan",class:"min-w-[20rem]"},{body:i(({data:a})=>[s("div",ze,[s("img",{src:a.image_url,alt:a.name,width:"32"},null,8,qe),s("p",We,I(a.name),1)])]),filter:i(({filterModel:a})=>[t(A,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(T,{sortable:"",field:"title",header:"Judul",class:"min-w-[20rem]"},{body:i(({data:a})=>[s("span",null,I(a.title_page??"-"),1)]),filter:i(({filterModel:a})=>[t(A,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,type:"text",placeholder:"Cari Judul"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(T,{sortable:"",field:"description",header:"Deskripsi",class:"min-w-[15rem]"},{body:i(({data:a})=>[H((S(),k("span",Ge,[N(I(a.description),1)])),[[O,a.description,void 0,{bottom:!0}]])]),filter:i(({filterModel:a})=>[t(A,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,type:"text",placeholder:"Cari Deskripsi"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(T,{sortable:"",header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:i(({data:a})=>[t(M,{value:y(a.status),severity:V(a.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:i(({filterModel:a})=>[t(o(q),{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,options:o(w),placeholder:"Pilih",showClear:""},{value:i(u=>[t(M,{value:y(u.value),severity:V(u.value)},null,8,["value","severity"])]),option:i(u=>[t(M,{value:y(u.option),severity:V(u.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(T,{sortable:"",header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[20rem]"},{body:i(({data:a})=>[N(I(f(a.updated_at)),1)]),filter:i(({filterModel:a})=>[t(o(fe),{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(T,{sortable:"",field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:i(({data:a})=>[s("div",Ke,[H(t(L,{icon:"pi pi-pencil",severity:"info",text:"",onClick:u=>(c.value=a,_.value=!0)},null,8,["onClick"]),[[O,"Ubah",void 0,{bottom:!0}]]),H(t(L,{icon:"pi pi-trash",severity:"danger",text:"",onClick:u=>x(a.id)},null,8,["onClick"]),[[O,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(o(be)),t(Q,{visible:o(b),"onUpdate:visible":e[6]||(e[6]=a=>E(b)?b.value=a:null),maximizable:"",modal:"",header:"Tambah Layanan",class:"sm:w-1/2 w-full"},{default:i(()=>[t(ae,{onOnClose:e[4]||(e[4]=a=>b.value=!1),onOnSave:e[5]||(e[5]=a=>(b.value=!1,l()))})]),_:1},8,["visible"]),t(Q,{visible:o(_),"onUpdate:visible":e[9]||(e[9]=a=>E(_)?_.value=a:null),maximizable:"",modal:"",header:"Ubah Layanan",class:"sm:w-1/2 w-full"},{default:i(()=>[t(le,{service:o(c),onOnClose:e[7]||(e[7]=a=>_.value=!1),onOnSave:e[8]||(e[8]=a=>(_.value=!1,l()))},null,8,["service"])]),_:1},8,["visible"])],64)}}});export{yt as default};
