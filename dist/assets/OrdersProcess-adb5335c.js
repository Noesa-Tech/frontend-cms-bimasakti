import{s as ie,a as de}from"./index-547ca5e5.js";import{s as ue}from"./index-525c2035.js";import{s as ce,a as pe}from"./index-9ddf3d55.js";import{s as me}from"./index-d7ab0596.js";import{s as _e}from"./index-b12d1d5d.js";import{s as ve}from"./index-ed61ab51.js";import{s as fe,a as ye}from"./index-ef5991cc.js";import{d as he,a as h,S as ge,a8 as Ve,r as A,V as M,P as be,c as y,f as t,b as o,D as x,J as a,e as r,L as P,y as xe,o as p,N as m,H as i,G as $,M as B,E as we,z as Te,W as d,X as u,ab as ke}from"./index-2917ce10.js";import{s as Se,a as De}from"./index-6372ac25.js";import{s as Ie}from"./index-9ea91010.js";import{_ as Ce}from"./TopBreadcrumb-739057b0.js";import{s as F,a as L,b as O,c as W}from"./index-ce958058.js";import{s as Ue}from"./index-639abafc.js";import{s as z}from"./index-5646386e.js";import{s as Ae}from"./index-6240175d.js";import{V as Pe,s as $e}from"./index-b3aec2fa.js";import{O as Ne}from"./order-304944f5.js";import"./index-4a56db6f.js";import"./index-002ee94f.js";import"./index-2f177586.js";import"./index-83a3f0d6.js";import"./index-775fa504.js";import"./_plugin-vue_export-helper-c27b6911.js";const Re={class:"card mt-8"},He={class:"flex items-center justify-end gap-4 md:order-2 order-1"},Me={class:"hidden md:flex"},Be={class:"flex md:hidden"},Fe={class:"text-start"},Le={class:"m-0"},Oe={class:"m-0 text-sm text-muted-color"},We={class:"flex flex-col gap-4 w-[25rem]"},ze={class:"flex gap-4 items-center"},Ke={class:"flex flex-col gap-2"},je={class:"flex items-center justify-start gap-4"},qe=["src","alt"],Ee={class:"flex flex-col items-start text-start gap-4"},Ge={class:"inline-flex"},Qe={class:"flex flex-col gap-1"},Je={class:"m-0 font-medium"},Xe={class:"flex items-center gap-2"},Ye={class:"m-0"},Ze={class:"flex items-center gap-2"},et={class:"flex items-center gap-2"},tt={class:"m-0"},at={class:"flex items-center gap-2"},ot={class:"m-0"},lt={class:"m-0"},st={class:"flex items-center gap-2"},nt={key:0},rt={key:1},it={class:"flex gap-4 items-center"},$t=he({__name:"OrdersProcess",setup(dt){h({});const N=h();h(),ge(),Ve();const R=h(),w=Ne(),H=Pe();A({vendor:null,reason:""});const K=h(0),g=h({global:{value:null,matchMode:d.CONTAINS},noInvoice:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"user.name":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"user.email":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"user.phone":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"service.name":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"properties.name":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},location:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},vendor:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},total_fee:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},date:{operator:u.AND,constraints:[{value:null,matchMode:d.DATE_IS}]},status:{operator:u.OR,constraints:[{value:null,matchMode:d.EQUALS}]},paymentMethod:{operator:u.OR,constraints:[{value:null,matchMode:d.EQUALS}]}}),j=A(["order_confirmed","in_process","on_the_way","work_started","waiting_for_payment","completed"]),q=A(["Transfer Bank","Virtual Account(VA)","GoPay","OVO"]);function T(n){switch(n){case"order_confirmed":return"contrast";case"in_process":return"warn";case"on_the_way":return"info";case"work_started":return"help";case"waiting_for_payment":return"secondary";case"completed":return"success";default:return"default"}}function k(n){switch(n){case"order_confirmed":return"Pesanan Terkonfirmasi";case"in_process":return"Pesanan Diproses";case"on_the_way":return"Menuju Lokasi";case"work_started":return"Sedang Dikerjakan";case"waiting_for_payment":return"Menunggu Pembayaran";case"completed":return"Selesai";default:return"-"}}function E(n){switch(n){case 0:return"Tidak Butuh Tangga";case 1:return"Butuh Tangga";default:return null}}M(()=>H.vendors.map(n=>({id:n.id,code:n.id,name:n.name,location:n.address,date:n.created_at,status:n.deleted_at,city:n.city,services:n.vendor_service})));const G=M(()=>w.allOrder||[]);be(async()=>{await w.fetchOrder("monitoring"),await H.fetchVendor()});function Q(n){return new Date(n).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const J=n=>{N.value.toggle(n)},X=n=>{R.value.exportCSV()};return(n,l)=>{const Y=Ce,_=ce,Z=Se,v=Ie,ee=De,c=de,V=ke,te=fe,ae=ye,oe=ve,b=_e,S=me,le=pe,D=ue,se=ie,ne=xe("tooltip");return p(),y(P,null,[t(Y,{breadcrumbItems:[{label:"Pesanan"}]}),o("div",Re,[l[18]||(l[18]=o("div",{class:"font-semibold text-xl mb-4"},"Data Pesanan Diproses",-1)),(p(),x(se,{ref_key:"dt",ref:R,key:K.value,value:r(G),paginator:!0,rows:10,dataKey:"id",filters:g.value,"onUpdate:filters":l[2]||(l[2]=e=>g.value=e),filterDisplay:"menu",loading:r(w).isLoading,globalFilterFields:["noInvoice","user.name","user.email","user.phone","items","location","service.name","properties.name","total_fee","vendor","date","status"],showGridlines:"",scrollable:""},{header:a(()=>[o("div",He,[o("div",Me,[t(_,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:l[0]||(l[0]=e=>X(e))})]),o("div",Be,[t(_,{type:"button",icon:"pi pi-download",outlined:""})]),t(ee,{class:"w-full md:w-auto"},{default:a(()=>[t(Z,null,{default:a(()=>l[3]||(l[3]=[o("i",{class:"pi pi-search"},null,-1)])),_:1}),t(v,{modelValue:g.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=e=>g.value.global.value=e),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])]),empty:a(()=>l[4]||(l[4]=[m(" No order found. ")])),loading:a(()=>l[5]||(l[5]=[m(" Loading order data. Please wait. ")])),default:a(()=>[t(c,{sortable:"",field:"noInvoice",header:"Invoice",class:"min-w-[15rem]"},{body:a(({data:e})=>[m(i(e.invoice),1)]),filter:a(({filterModel:e})=>[t(v,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Invoice"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",field:"user.name",header:"Pelanggan",class:"min-w-[15rem]"},{body:a(({data:e})=>[o("div",Fe,[o("h6",Le,i(e.user.name),1),o("p",Oe,i(e.user.email),1),o("p",{class:"m-0 text-sm text-primary cursor-pointer hover:text-primary-300 transition-all max-w-fit",onClick:J},[m(i(e.user.phone),1),l[6]||(l[6]=o("i",{class:"pi pi-angle-down ml-2",style:{"font-size":"0.8rem"}},null,-1))]),t(r($e),{ref_key:"opPhone",ref:N},{default:a(()=>[o("div",We,[o("div",null,[l[7]||(l[7]=o("h6",{class:"mb-0"},"Opsi Nomor Telepon",-1)),t(V)]),t(ae,null,{default:a(()=>[t(v,{value:e.user.phone,readonly:"",class:"w-[25rem]"},null,8,["value"]),t(te,null,{default:a(()=>[t(_,{icon:"pi pi-phone"})]),_:1})]),_:2},1024),o("div",ze,[t(V),l[8]||(l[8]=o("p",{class:"m-0 text-center text-muted-color text-sm"},"Atau",-1)),t(V)]),o("div",Ke,[l[9]||(l[9]=o("label",{for:"message"},"Kirim Pesan",-1)),t(oe,{id:"message"})]),t(_,{icon:"pi pi-send",label:"Kirim Pesan",iconPos:"right"})])]),_:2},1536)])]),filter:a(({filterModel:e})=>[t(v,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Pelanggan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Lokasi",filterField:"location",class:"min-w-[24rem]"},{body:a(({data:e})=>[m(i(e.location),1)]),filter:a(({filterModel:e})=>[t(v,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Kota"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Layanan",filterField:"service.name",class:"min-w-[40rem]"},{body:a(({data:e})=>[t(r(F),{value:"0"},{default:a(()=>[t(r(L),{value:"1",class:"accordion-table"},{default:a(()=>[t(r(O),null,{default:a(()=>[o("div",je,[e.service.full_image_url?(p(),y("img",{key:0,src:e.service.full_image_url,alt:e.service.name,class:"h-6 text-sm font-normal"},null,8,qe)):$("",!0),o("span",null,i(e.service.name),1)])]),_:2},1024),t(r(W),null,{default:a(()=>[t(V),t(r(F),{value:"0"},{default:a(()=>[(p(!0),y(P,null,B(e.problems,(s,I)=>(p(),x(r(L),{key:s.name,value:I},{default:a(()=>[t(r(O),{class:we({"accordion-subheader":e.service.image_url})},{default:a(()=>[m(i(s.name),1)]),_:2},1032,["class"]),t(r(W),{class:"accordion-content"},{default:a(()=>[o("div",Ee,[(p(!0),y(P,null,B(s.sub_problem,(f,re)=>(p(),y("ol",{key:re,class:"list-disc list-inside"},[o("li",null,[o("div",Ge,[o("div",Qe,[o("p",Je,"Kategori: "+i(f.name),1),o("div",Xe,[l[13]||(l[13]=o("p",{class:"m-0"},"QTY:",-1)),t(S,{class:"inplace-custom-display"},{display:a(()=>[o("p",Ye,[m(i(f.qty),1),l[10]||(l[10]=o("i",{class:"pi pi-pencil ml-2"},null,-1))])]),content:a(({closeCallback:C})=>[o("div",Ze,[t(b,{modelValue:f.qty,"onUpdate:modelValue":U=>f.qty=U,inputId:"horizontal-buttons",showButtons:"",buttonLayout:"horizontal",min:0,max:99,inputClass:" text-center border-l border-l-red-500 border-r border-r-green-500 bg-transparent max-w-[4rem]",incrementButtonClass:"border-green-500",decrementButtonClass:"border-red-500",small:""},{incrementbuttonicon:a(()=>l[11]||(l[11]=[o("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:a(()=>l[12]||(l[12]=[o("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["modelValue","onUpdate:modelValue"]),t(_,{icon:"pi pi-check",outlined:"",severity:"success",onClick:C},null,8,["onClick"])])]),_:2},1024)]),o("div",et,[l[15]||(l[15]=o("p",{class:"m-0"},"Harga:",-1)),t(S,{class:"inplace-custom-display"},{display:a(()=>[o("p",tt,[m("Rp"+i(n.formatPrice(f.price)),1),l[14]||(l[14]=o("i",{class:"pi pi-pencil ml-2"},null,-1))])]),content:a(({closeCallback:C})=>[o("div",at,[t(b,{modelValue:f.price,"onUpdate:modelValue":U=>f.price=U,type:"text",placeholder:"Cari Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"]),t(_,{icon:"pi pi-check",outlined:"",severity:"success",onClick:C},null,8,["onClick"])])]),_:2},1024)])])])])]))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),t(c,{field:"properties.name",header:"Jenis Property",class:"min-w-[15rem]",sortable:""},{body:a(({data:e})=>[o("div",null,[o("p",ot,i(e.properties.name),1),e.isLadderRequired?(p(),x(le,{key:0,value:E(e.isLadderRequired)??"",size:"small",class:"mb-2"},null,8,["value"])):$("",!0),t(S,{class:"inplace-custom-display"},{display:a(()=>[o("p",lt,[m("Rp"+i(n.formatPrice(e.properties.fee)),1),l[16]||(l[16]=o("i",{class:"pi pi-pencil ml-2"},null,-1))])]),content:a(({closeCallback:s})=>[o("div",st,[t(b,{modelValue:e.properties.fee,"onUpdate:modelValue":I=>e.properties.fee=I,type:"text",placeholder:"Cari Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"]),t(_,{icon:"pi pi-check",outlined:"",severity:"success",onClick:s},null,8,["onClick"])])]),_:2},1024)])]),filter:a(({filterModel:e})=>[t(v,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Property"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",field:"total_fee",header:"Total Harga",class:"min-w-[15rem]"},{body:a(({data:e})=>[e.total_fee?(p(),y("span",nt,"Rp"+i(n.formatPrice(e.total_fee)),1)):(p(),y("span",rt,"Harga belum ditentukan"))]),filter:a(({filterModel:e})=>[t(b,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Status",field:"status",filterMenuStyle:{width:"18rem"},class:"min-w-[20rem]"},{body:a(({data:e})=>[t(D,{value:k(e.status),severity:T(e.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:a(({filterModel:e})=>[t(r(z),{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:j,placeholder:"Pilih",showClear:""},{value:a(s=>[s.value!=null?(p(),x(D,{key:0,value:k(s.value),severity:T(s.value)},null,8,["value","severity"])):$("",!0)]),option:a(s=>[t(D,{value:k(s.option),severity:T(s.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(c,{sortable:"",field:"paymentMethod",header:"Metode Pembayaran",class:"min-w-[15rem]"},{body:a(({data:e})=>l[17]||(l[17]=[m(" Bank Transfer ")])),filter:a(({filterModel:e})=>[t(r(z),{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:q,placeholder:"Pilih",showClear:""},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(c,{sortable:"",field:"vendor",header:"Vendor Pilihan",class:"min-w-[15rem]"},{body:a(({data:e})=>{var s;return[o("span",null,i((s=e==null?void 0:e.vendor_id)==null?void 0:s.name),1)]}),filter:a(({filterModel:e})=>[t(v,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Vendor"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Tanggal Pesanan",filterField:"date",dataType:"date",class:"min-w-[20rem]"},{body:a(({data:e})=>[m(i(Q(e.created_at)),1)]),filter:a(({filterModel:e})=>[t(r(Ue),{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:a(({data:e})=>[o("div",it,[Te(t(_,{icon:"pi pi-external-link",severity:"info",text:"",as:"router-link",to:{name:"order-detail",params:{id:e.id}}},null,8,["to"]),[[ne,"Detail Pesanan",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(r(Ae))],64)}}});export{$t as default};
