var P=(D,k,v)=>new Promise((T,h)=>{var p=c=>{try{y(v.next(c))}catch(_){h(_)}},S=c=>{try{y(v.throw(c))}catch(_){h(_)}},y=c=>c.done?T(c.value):Promise.resolve(c.value).then(p,S);y((v=v.apply(D,k)).next())});import{s as G,a as X}from"./index-e8100579.js";import{s as Z}from"./index-68faeb46.js";import{s as z}from"./index-25520a8f.js";import{s as Q,a as Y}from"./index-cd00fc9b.js";import{p as ee,v as x,X as ae,S as te,a4 as ne,Y as r,$ as m,c as A,h as a,a as t,E as I,t as i,w as n,x as l,z as se,N as w,K as oe,o as g,P as f,O as R,k as L,n as ie,L as le,ab as re}from"./index-d437d7fc.js";import{s as de,a as me}from"./index-b3eca18e.js";import{s as ue}from"./index-c4c5cc4e.js";import{_ as ce}from"./TopBreadcrumb-4eb25591.js";import{s as F,a as B,b as M,c as N}from"./index-9ac221f9.js";import{s as pe}from"./index-c860a33e.js";import{S as ve}from"./service-3314fefc.js";import"./index-e4bc853b.js";import"./index-acdcfdc4.js";import"./index-95cf565f.js";import"./index-2553b5a2.js";import"./index-9e92f3fc.js";import"./index-656c219f.js";import"./_plugin-vue_export-helper-c27b6911.js";const be={getData(){return[{id:1,noInvoice:"INV-23949230-23211",service:{id:7,name:"Pemasangan & Perawatan AC",description:"Kami menyediakan layanan Pemasangan dan Perawatan AC profesional untuk memastikan kenyamanan dan efisiensi pendinginan udara di rumah, kantor, atau tempat usaha Anda. Dengan tim teknisi berpengalaman dan peralatan modern, kami siap memberikan hasil terbaik untuk segala kebutuhan AC Anda.",image:"services/OuBHWO3F8nkj2fbMauxJWbadYpQwxnA7hFMhTE62.png",image_url:"https://api-bimasakti.noesatech.com/uploads/services/OuBHWO3F8nkj2fbMauxJWbadYpQwxnA7hFMhTE62.png",problem:[{name:"Service Rutin",sub_problem:[{name:"AC 0.5 pk",qty:3,price:5e4},{name:"AC 1 pk",qty:4,price:5e4},{name:"AC 1.5 pk",qty:5,price:5e4}]},{name:"Bongkar/Pasang AC",sub_problem:[{name:"AC 0.5 pk",qty:3,price:5e4},{name:"AC 1 pk",qty:4,price:5e4},{name:"AC 1.5 pk",qty:5,price:5e4}]}]},status:1,date:"2024-11-30T14:29:50.000000Z",total:15e4,useLadder:0,property:{id:1,name:"Rumah Pribadi",price:5e4},customer:{id:1,name:"Khajijah",email:"exmple@email.com",phone:"82118849939"},location:"Jl. Sekeloa II, No. 50, RT/11 RW/11, Sekeloa Selatan, Ciheulang, Kota Bandung, Jawa Barat",paymentMethod:"Transfer Bank",vendor:{id:1,name:"PT Angkasa Jaya",code:"X5TD45"}},{id:2,noInvoice:"INV-23949230-23442",service:{id:10,name:"House Cleaning",description:"Lorem ipsum odor amet, consectetuer adipiscing elit. Cras platea vehicula sed senectus nunc. Consequat pretium auctor penatibus per etiam felis. Finibus amet luctus lacus fermentum curabitur dis. Congue nec sem elit ipsum semper. Dapibus faucibus cursus consequat inceptos metus porta interdum. Conubia turpis semper tellus litora pharetra; vitae enim faucibus. Potenti sagittis facilisi malesuada cras eleifend. Vitae sodales nec maecenas diam nunc semper, natoque eget. Suscipit felis quam laoreet platea phasellus placerat gravida condimentum. Sed conubia gravida ultrices dolor felis id. Nullam condimentum efficitur magnis quam massa curabitur ad eros. Augue per neque venenatis tempor mollis. Eget congue ridiculus fames erat libero per congue urna.",image:"services/sw3UGJvrvbrFLL3csz2stZdbeLhmkGDp3XSJbFAr.png",image_url:"https://api-bimasakti.noesatech.com/uploads/services/sw3UGJvrvbrFLL3csz2stZdbeLhmkGDp3XSJbFAr.png",problem:[{name:"AC tidak Dingin",sub_problem:[{name:"AC 0.5 pk",qty:2,price:5e4}]}]},status:1,date:"2024-11-30T14:29:50.000000Z",total:5e4,useLadder:1,property:{id:1,name:"Rumah Pribadi",price:5e4},customer:{id:1,name:"Khajijah",email:"exmple@email.com",phone:"82118849939"},location:"Jl. Sekeloa II, No. 50, RT/11 RW/11, Sekeloa Selatan, Ciheulang, Kota Bandung, Jawa Barat",paymentMethod:"Transfer Bank",vendor:{id:1,name:"PT Angkasa Jaya",code:"X5TD45"}},{id:3,noInvoice:"INV-23949230-23211",service:{id:7,name:"Pemasangan & Perawatan AC",description:"Kami menyediakan layanan Pemasangan dan Perawatan AC profesional untuk memastikan kenyamanan dan efisiensi pendinginan udara di rumah, kantor, atau tempat usaha Anda. Dengan tim teknisi berpengalaman dan peralatan modern, kami siap memberikan hasil terbaik untuk segala kebutuhan AC Anda.",image:"services/OuBHWO3F8nkj2fbMauxJWbadYpQwxnA7hFMhTE62.png",image_url:"https://api-bimasakti.noesatech.com/uploads/services/OuBHWO3F8nkj2fbMauxJWbadYpQwxnA7hFMhTE62.png",problem:[{name:"Service Rutin",sub_problem:[{name:"AC 0.5 pk",qty:3,price:5e4},{name:"AC 1 pk",qty:4,price:5e4},{name:"AC 1.5 pk",qty:5,price:5e4}]}]},status:1,date:"2024-11-30T14:29:50.000000Z",total:15e4,useLadder:1,property:{id:1,name:"Rumah Pribadi",price:5e4},customer:{id:1,name:"Alif bata jim sa sho",email:"exmple@email.com",phone:"82118849939"},location:"Jl. Sekeloa II, No. 50, RT/11 RW/11, Sekeloa Selatan, Ciheulang, Kota Bandung, Jawa Barat",paymentMethod:"Transfer Bank",vendor:{id:1,name:"PT Angkasa Jaya",code:"X5TD45"}},{id:4,noInvoice:"INV-23949230-23442",service:{id:10,name:"House Cleaning",description:"Lorem ipsum odor amet, consectetuer adipiscing elit. Cras platea vehicula sed senectus nunc. Consequat pretium auctor penatibus per etiam felis. Finibus amet luctus lacus fermentum curabitur dis. Congue nec sem elit ipsum semper. Dapibus faucibus cursus consequat inceptos metus porta interdum. Conubia turpis semper tellus litora pharetra; vitae enim faucibus. Potenti sagittis facilisi malesuada cras eleifend. Vitae sodales nec maecenas diam nunc semper, natoque eget. Suscipit felis quam laoreet platea phasellus placerat gravida condimentum. Sed conubia gravida ultrices dolor felis id. Nullam condimentum efficitur magnis quam massa curabitur ad eros. Augue per neque venenatis tempor mollis. Eget congue ridiculus fames erat libero per congue urna.",image:"services/sw3UGJvrvbrFLL3csz2stZdbeLhmkGDp3XSJbFAr.png",image_url:"https://api-bimasakti.noesatech.com/uploads/services/sw3UGJvrvbrFLL3csz2stZdbeLhmkGDp3XSJbFAr.png",problem:[{name:"AC tidak Dingin",sub_problem:[{name:"AC 0.5 pk",qty:2,price:5e4}]}]},status:1,date:"2024-11-30T14:29:50.000000Z",total:5e4,useLadder:0,property:{id:1,name:"Rumah Pribadi",price:5e4},customer:{id:1,name:"Alif bata jim sa sho",email:"exmple@email.com",phone:"82118849939"},location:"Jl. Sekeloa II, No. 50, RT/11 RW/11, Sekeloa Selatan, Ciheulang, Kota Bandung, Jawa Barat",paymentMethod:"Transfer Bank",vendor:{id:1,name:"PT Angkasa Jaya",code:"X5TD45"}}]},getPaymentReportService(){return Promise.resolve(this.getData())}},fe={class:"grid grid-cols-12 gap-8 mt-8"},ge={class:"col-span-12 lg:col-span-6 xl:col-span-4"},he={class:"card mb-0"},ye={class:"flex justify-between mb-4"},_e={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},xe={class:"card mt-8"},ke={class:"flex items-center gap-4 justify-end md:order-2 order-1"},Te={class:"hidden md:flex"},Ae={class:"flex md:hidden"},Se={class:"flex flex-col text-start w-full"},Ce={class:"m-0"},Ve={class:"m-0 text-sm text-muted-color"},we={class:"m-0 text-sm text-muted-color"},De={class:"flex items-center justify-start gap-4"},Pe=["src","alt"],Ie={class:"flex flex-col items-start text-start gap-2"},Re={class:"m-0"},Le={class:"m-0 text-sm text-muted-color"},Fe={class:"flex flex-col text-start w-full"},Be={class:"m-0"},Me={class:"m-0 text-sm text-muted-color"},Ne={class:"flex gap-4 items-center"},na=ee({__name:"PaymentReport",setup(D){const k=ve(),v=x(null),T=x(!1),h=x(),p=x({});x(0),ae(()=>k.serviceAll||[]);function S(d){switch(d){case 0:return"Tidak Butuh Tangga";case 1:return"Butuh Tangga";default:return null}}te(()=>P(this,null,function*(){yield k.fetchService()})),ne(()=>{be.getPaymentReportService().then(d=>{v.value=d,T.value=!1}),y()});function y(){p.value={global:{value:null,matchMode:r.CONTAINS},"customer.name":{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},"customer.phone":{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},"customer.email":{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},"vendor.name":{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},"service.name":{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},"property.name":{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},paymentMethod:{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},description:{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},location:{operator:m.AND,constraints:[{value:null,matchMode:r.STARTS_WITH}]},date:{operator:m.AND,constraints:[{value:null,matchMode:r.DATE_IS}]},useLadder:{operator:m.OR,constraints:[{value:null,matchMode:r.EQUALS}]}}}function c(d){return new Date(d).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const _=d=>{h.value.exportCSV()};return(d,s)=>{const J=ce,C=Q,U=de,b=ue,q=me,u=X,W=re,j=Y,H=z,$=Z,K=G,O=oe("tooltip");return g(),A(w,null,[a(J,{breadcrumbItems:[{label:"Laporan Keuangan"}]}),t("div",fe,[s[7]||(s[7]=I('<div class="col-span-12 lg:col-span-6 xl:col-span-4"><div class="card mb-0"><div class="flex justify-between mb-4"><div><span class="block text-muted-color font-medium mb-4">Transaksi Berhasil</span><div class="text-surface-900 dark:text-surface-0 font-medium text-xl">960</div></div><div class="flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border" style="width:2.5rem;height:2.5rem;"><i class="pi pi-shopping-cart text-blue-500 !text-xl"></i></div></div><span class="text-primary font-medium">24 baru </span><span class="text-muted-color">dari kunjungan terakhir</span></div></div>',1)),t("div",ge,[t("div",he,[t("div",ye,[t("div",null,[s[3]||(s[3]=t("span",{class:"block text-muted-color font-medium mb-4"},"Pendapatan",-1)),t("div",_e,"Rp"+i(d.formatPrice(5345e4)),1)]),s[4]||(s[4]=t("div",{class:"flex items-center justify-center bg-orange-100 dark:bg-orange-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-dollar text-orange-500 !text-xl"})],-1))]),s[5]||(s[5]=t("span",{class:"text-primary font-medium"},"%12+ ",-1)),s[6]||(s[6]=t("span",{class:"text-muted-color"},"dari bulan lalu",-1))])]),s[8]||(s[8]=I('<div class="col-span-12 lg:col-span-6 xl:col-span-4"><div class="card mb-0"><div class="flex justify-between mb-4"><div><span class="block text-muted-color font-medium mb-4">Pelanggan</span><div class="text-surface-900 dark:text-surface-0 font-medium text-xl">890</div></div><div class="flex items-center justify-center bg-cyan-100 dark:bg-cyan-400/10 rounded-border" style="width:2.5rem;height:2.5rem;"><i class="pi pi-users text-cyan-500 !text-xl"></i></div></div><span class="text-primary font-medium">12 </span><span class="text-muted-color">Pelanggan baru</span></div></div>',1))]),t("div",xe,[s[12]||(s[12]=t("div",{class:"font-semibold text-xl mb-4"},"Laporan Keuangan",-1)),a(K,{ref_key:"dt",ref:h,value:l(v),rowGroupMode:"rowspan",groupRowsBy:"customer.name",paginator:!0,rows:10,dataKey:"id",filters:l(p),"onUpdate:filters":s[2]||(s[2]=e=>se(p)?p.value=e:null),filterDisplay:"menu",loading:l(T),globalFilterFields:["customer.name","customer.phone","customer.email","service.name","property.name","paymentMethod","location","price","useLadder","date"],showGridlines:""},{header:n(()=>[t("div",ke,[t("div",Te,[a(C,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:s[0]||(s[0]=e=>_(e))})]),t("div",Ae,[a(C,{type:"button",icon:"pi pi-download",outlined:""})]),a(q,{class:"w-full md:w-auto"},{default:n(()=>[a(U,null,{default:n(()=>s[9]||(s[9]=[t("i",{class:"pi pi-search"},null,-1)])),_:1}),a(b,{modelValue:l(p).global.value,"onUpdate:modelValue":s[1]||(s[1]=e=>l(p).global.value=e),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])]),empty:n(()=>s[10]||(s[10]=[f(" Tidak ada data Kategori. ")])),loading:n(()=>s[11]||(s[11]=[f(" Memuat data Kategori. Mohon tunggu. ")])),default:n(()=>[a(u,{field:"customer.name",header:"Pelanggan",sortable:""},{body:n(({data:e})=>[t("div",Se,[t("h6",Ce,i(e.customer.name),1),t("p",Ve,"+62-"+i(e.customer.phone),1),t("p",we,i(e.customer.email),1)])]),filter:n(({filterModel:e})=>[a(b,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Cari Pelanggan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{header:"Lokasi",filterField:"location",dataType:"text",class:"min-w-[20rem]",sortable:""},{body:n(({data:e})=>[f(i(e.location),1)]),filter:n(({filterModel:e})=>[a(b,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Cari Lokasin"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{field:"service.name",header:"Layanan",class:"min-w-[32rem]",sortable:""},{body:n(({data:e})=>[a(l(F),{value:"0"},{default:n(()=>[a(l(B),{value:"1",class:"accordion-table"},{default:n(()=>[a(l(M),null,{default:n(()=>[t("div",De,[t("img",{src:e.service.image_url,alt:e.service.name,class:"h-6"},null,8,Pe),t("span",null,i(e.service.name),1)])]),_:2},1024),a(l(N),null,{default:n(()=>[a(W),a(l(F),{value:"0"},{default:n(()=>[(g(!0),A(w,null,R(e.service.problem,o=>(g(),L(l(B),{key:o.name,value:o.name},{default:n(()=>[a(l(M),{class:"accordion-subheader"},{default:n(()=>[f(i(o.name),1)]),_:2},1024),a(l(N),{class:"accordion-content"},{default:n(()=>[t("div",Ie,[(g(!0),A(w,null,R(o.sub_problem,(V,E)=>(g(),A("ol",{key:E,class:"list-disc list-inside"},[t("li",null,i(V.name)+" (x"+i(V.qty)+") • Rp"+i(d.formatPrice(V.price)),1)]))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),filter:n(({filterModel:e})=>[a(b,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{field:"property.name",header:"Jenis Property",class:"min-w-[15rem]",sortable:""},{body:n(({data:e})=>{var o;return[t("div",null,[t("p",Re,i(e.property.name),1),e.useLadder?(g(),L(j,{key:0,value:(o=S(e.useLadder))!=null?o:"",size:"small",class:"mb-2"},null,8,["value"])):ie("",!0),t("p",Le,"Rp"+i(d.formatPrice(e.property.price)),1)])]}),filter:n(({filterModel:e})=>[a(b,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Cari Property"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{header:"Total Harga",filterField:"price",dataType:"text",class:"min-w-[12rem]",sortable:""},{body:n(({data:e})=>[f(" Rp"+i(d.formatPrice(e.total)),1)]),filter:n(({filterModel:e})=>[a(H,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Cari Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{field:"vendor.name",header:"Vendor",class:"min-w-[15rem]",sortable:""},{body:n(({data:e})=>[t("div",Fe,[t("p",Be,i(e.vendor.name),1),t("p",Me,i(e.vendor.code),1)])]),filter:n(({filterModel:e})=>[a(b,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Cari Vendor"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{header:"Status",field:"status",sortable:""},{body:n(({data:e})=>[a($,{value:"Selesai",severity:"success",class:"whitespace-nowrap"})]),_:1}),a(u,{header:"Metode Pembayaran",filterField:"paymentMethod",dataType:"text",class:"min-w-[12rem]",sortable:""},{body:n(({data:e})=>[f(i(e.paymentMethod),1)]),filter:n(({filterModel:e})=>[a(b,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:"text",placeholder:"Cari Metode Pembayaran"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{header:"Tanggal Transaksi",filterField:"date",dataType:"date",class:"min-w-[12rem]",sortable:""},{body:n(({data:e})=>[f(i(c(e.date)),1)]),filter:n(({filterModel:e})=>[a(l(pe),{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(u,{field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]",sortable:""},{body:n(({data:e})=>[t("div",Ne,[le(a(C,{icon:"pi pi-external-link",severity:"info",text:"",as:"router-link",to:{name:"order-detail",params:{id:e.id}}},null,8,["to"]),[[O,"Detail Pesanan",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"])])],64)}}});export{na as default};
