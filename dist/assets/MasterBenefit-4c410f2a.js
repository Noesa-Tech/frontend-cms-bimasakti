var S=(y,m,u)=>new Promise((p,V)=>{var v=d=>{try{b(u.next(d))}catch(_){V(_)}},g=d=>{try{b(u.throw(d))}catch(_){V(_)}},b=d=>d.done?p(d.value):Promise.resolve(d.value).then(v,g);b((u=u.apply(y,m)).next())});import{s as z}from"./index-facb98bd.js";import{s as K}from"./index-c5b2462e.js";import{s as G}from"./index-5b391e5b.js";import{s as D,a as ue,b as de}from"./index-9cd87068.js";import{p as Q,a5 as te,q as L,a2 as O,Q as W,o as $,c as N,a,h as t,z as n,w as l,t as B,n as q,k as Y,M as J,a6 as ce,a7 as I,a8 as R,a1 as me,v as k,D as H,J as pe,O as M,K as ee,a3 as A,a4 as F}from"./index-e1929d3d.js";import{V as ae}from"./vendor-f84ed35c.js";import{S as X}from"./service-6dfa86d3.js";import{s as ve}from"./index-0bcdbf95.js";import{s as fe,a as ye}from"./index-efe509d0.js";import{_ as _e}from"./TopBreadcrumb-7bdf86c1.js";import{s as ge}from"./index-dda7ec17.js";import{s as be}from"./index-709279db.js";import"./index-106445de.js";import"./index-11ea55b2.js";import"./index-c7c4c86d.js";import"./index-40b74cf5.js";import"./_plugin-vue_export-helper-c27b6911.js";const he={class:"flex flex-col gap-2 mb-4"},xe={class:"flex flex-col gap-2 mb-4"},Se={key:0,class:"flex gap-4 items-center"},Ve=["src"],$e={class:"m-0"},we={class:"flex gap-4 items-center"},Be=["src"],Te={class:"m-0"},ke={class:"flex flex-col gap-2"},Ce={class:"flex justify-end gap-2 mt-8"},Ue=Q({__name:"EditBenefits",props:{benefitsId:{type:[Number,null],required:!0}},emits:["on-close","on-save"],setup(y,{emit:m}){te();const u=m,p=X();ae();const V=L([0,1]),v=L({name:"",service:null,status:null});function g(){return S(this,null,function*(){u("on-save")})}function b(h){switch(h){case 0:return"danger";case 1:return"success"}}function d(h){switch(h){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const _=O(()=>p.serviceAll||[]);return W(()=>S(this,null,function*(){yield p.fetchService()})),(h,i)=>{const c=G,T=K,w=z;return $(),N(J,null,[a("div",he,[i[5]||(i[5]=a("label",{for:"name"},"Nama Benefit",-1)),t(c,{modelValue:n(v).name,"onUpdate:modelValue":i[0]||(i[0]=o=>n(v).name=o),id:"name","aria-describedby":"name-help",placeholder:"Nama Benefit"},null,8,["modelValue"])]),a("div",xe,[i[6]||(i[6]=a("label",{for:"desc"},"Layanan",-1)),t(n(D),{modelValue:n(v).service,"onUpdate:modelValue":i[1]||(i[1]=o=>n(v).service=o),options:n(_),placeholder:"Pilih Layanan"},{value:l(o=>[o.value!=null?($(),N("div",Se,[a("img",{src:o.value.image_url,alt:"",class:"h-4"},null,8,Ve),a("p",$e,B(o.value.name),1)])):q("",!0)]),option:l(o=>[a("div",we,[a("img",{src:o.option.image_url,alt:"",class:"h-4"},null,8,Be),a("p",Te,B(o.option.name),1)])]),_:1},8,["modelValue","options"])]),a("div",ke,[i[7]||(i[7]=a("label",{for:"desc"},"Status",-1)),t(n(D),{modelValue:n(v).status,"onUpdate:modelValue":i[2]||(i[2]=o=>n(v).status=o),options:n(V),placeholder:"Pilih Status"},{value:l(o=>[o.value!=null?($(),Y(T,{key:0,value:d(o.value),severity:b(o.value)},null,8,["value","severity"])):q("",!0)]),option:l(o=>[t(T,{value:d(o.option),severity:b(o.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",Ce,[t(w,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:i[3]||(i[3]=o=>u("on-close"))}),t(w,{type:"button",label:"Simpan",onClick:i[4]||(i[4]=o=>g())})])],64)}}}),Ae={class:"flex flex-col gap-2 mb-4"},De={class:"flex flex-col gap-2 mb-4"},Le={key:0,class:"flex gap-4 items-center"},Ne=["src"],Ie={class:"m-0"},Me={class:"flex gap-4 items-center"},Fe=["src"],Oe={class:"m-0"},qe={class:"flex flex-col gap-2"},Ee={class:"flex justify-end gap-2 mt-8"},je=Q({__name:"AddBenefits",props:{service:{type:[],required:!0}},emits:["on-close","on-save"],setup(y,{emit:m}){te();const u=y,p=m,V=X();ae();const v=L([0,1]),g=L({name:"",service:null,status:null});function b(){return S(this,null,function*(){console.log(g),p("on-save")})}function d(i){switch(i){case 0:return"danger";case 1:return"success"}}function _(i){switch(i){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const h=O(()=>u.service||[]);return W(()=>S(this,null,function*(){yield V.fetchService()})),(i,c)=>{const T=G,w=K,o=z;return $(),N(J,null,[a("div",Ae,[c[5]||(c[5]=a("label",{for:"name"},"Nama Benefit",-1)),t(T,{modelValue:n(g).name,"onUpdate:modelValue":c[0]||(c[0]=r=>n(g).name=r),id:"name","aria-describedby":"name-help",placeholder:"Nama Benefit"},null,8,["modelValue"])]),a("div",De,[c[6]||(c[6]=a("label",{for:"desc"},"Layanan",-1)),t(n(D),{modelValue:n(g).service,"onUpdate:modelValue":c[1]||(c[1]=r=>n(g).service=r),optionValue:"id",optionLabel:"name",options:n(h),placeholder:"Pilih Layanan"},{value:l(r=>[r.value!=null?($(),N("div",Le,[a("img",{src:r.value.image_url,alt:"",class:"h-4"},null,8,Ne),a("p",Ie,B(r.value.name),1)])):q("",!0)]),option:l(r=>[a("div",Me,[a("img",{src:r.option.image_url,alt:"",class:"h-4"},null,8,Fe),a("p",Oe,B(r.option.name),1)])]),_:1},8,["modelValue","options"])]),a("div",qe,[c[7]||(c[7]=a("label",{for:"desc"},"Status",-1)),t(n(D),{modelValue:n(g).status,"onUpdate:modelValue":c[2]||(c[2]=r=>n(g).status=r),options:n(v),placeholder:"Pilih Status"},{value:l(r=>[r.value!=null?($(),Y(w,{key:0,value:_(r.value),severity:d(r.value)},null,8,["value","severity"])):q("",!0)]),option:l(r=>[t(w,{value:_(r.option),severity:d(r.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",Ee,[t(o,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:c[3]||(c[3]=r=>p("on-close"))}),t(o,{type:"button",label:"Simpan",onClick:c[4]||(c[4]=r=>b())})])],64)}}}),Re=ce("ServiceBenefitStore",{state:()=>({isLoading:!1,serviceBenefitAll:[]}),actions:{fetchServiceBenefit(){return S(this,null,function*(){this.isLoading=!0;try{const y=yield I.get("/auth/services-benefit");this.serviceBenefitAll=y.data}catch(y){}finally{this.isLoading=!1}})},addService(y){return S(this,null,function*(){this.isLoading=!0;const m=new FormData;for(const u in y)m.append(u,y[u]);try{const u=yield I.post("/auth/services",m,{headers:{"Content-Type":"multipart/form-data"}});R("success",u.message)}catch(u){}finally{this.isLoading=!1}})},updateServcice(y,m){return S(this,null,function*(){this.isLoading=!0;const u=new FormData;for(const p in m)u.append(p,m[p]);try{const p=yield I.post(`/auth/services/${y}`,u,{headers:{"Content-Type":"multipart/form-data"}});R("success",p.message)}catch(p){}finally{this.isLoading=!1}})},delete(y){return S(this,null,function*(){this.isLoading=!0;try{const m=yield I.delete(`/auth/services/${y}`);R("success",m.message)}catch(m){}finally{this.isLoading=!1}})}}}),He={class:"card mt-8"},ze={class:"flex flex-col md:flex-row justify-between gap-4"},Ke={class:"flex items-center gap-4 md:order-2 order-1"},Ge={class:"hidden md:flex"},Qe={class:"flex md:hidden"},We={class:"flex flex-col items-center gap-2"},Ye=["alt","src"],Je={class:"flex gap-4 items-center"},ft=Q({__name:"MasterBenefit",setup(y){const m=me(),u=X(),p=Re(),V=k(),v=k({global:{value:null,matchMode:A.CONTAINS},"service.name":{operator:F.AND,constraints:[{value:null,matchMode:A.STARTS_WITH}]},name:{operator:F.AND,constraints:[{value:null,matchMode:A.STARTS_WITH}]},updated_at:{operator:F.AND,constraints:[{value:null,matchMode:A.DATE_IS}]},status:{operator:F.OR,constraints:[{value:null,matchMode:A.EQUALS}]}}),g=k(0);k(null);const b=L([1,0]),d=k(!1),_=k(!1);function h(x){switch(x){case 0:return"danger";case 1:return"success"}}function i(x){switch(x){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const c=O(()=>p.serviceBenefitAll||[]),T=O(()=>u.serviceAll||[]);function w(x){return new Date(x).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const o=x=>{V.value.exportCSV()},r=x=>{m.require({target:x.currentTarget,message:"Yakin ingin menghapus benefit ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:()=>{},reject:()=>{}})};return W(()=>S(this,null,function*(){yield u.fetchService(1),yield p.fetchServiceBenefit()})),(x,s)=>{const se=_e,C=z,ne=ue,E=G,le=de,U=ye,j=K,oe=fe,ie=je,Z=ve,re=Ue,P=pe("tooltip");return $(),N(J,null,[t(se,{breadcrumbItems:[{label:"Master"},{label:"Benefit"}]}),a("div",He,[s[15]||(s[15]=a("div",{class:"font-semibold text-xl mb-4"},"Data Benefit",-1)),($(),Y(oe,{ref_key:"dt",ref:V,key:n(g),value:n(c),rowGroupMode:"rowspan",groupRowsBy:"service.name",paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:n(v),"onUpdate:filters":s[5]||(s[5]=e=>H(v)?v.value=e:null),filterDisplay:"menu",loading:x.isLoading,globalFilterFields:["service.name","name","status","updated_at"],showGridlines:""},{header:l(()=>[a("div",ze,[t(C,{type:"button",icon:"pi pi-plus",label:"Tambah Benefit",class:"md:order-1 order-2",onClick:s[0]||(s[0]=e=>_.value=!0)}),a("div",Ke,[a("div",Ge,[t(C,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:s[1]||(s[1]=e=>o(e))})]),a("div",Qe,[t(C,{type:"button",icon:"pi pi-download",outlined:""})]),t(le,{class:"w-full md:w-auto"},{default:l(()=>[t(ne,null,{default:l(()=>s[12]||(s[12]=[a("i",{class:"pi pi-search"},null,-1)])),_:1}),t(E,{modelValue:n(v).global.value,"onUpdate:modelValue":s[2]||(s[2]=e=>n(v).global.value=e),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:l(()=>s[13]||(s[13]=[M(" Tidak ada data Benefit. ")])),loading:l(()=>s[14]||(s[14]=[M(" Memuat data Benefit. Mohon tunggu. ")])),default:l(()=>[t(U,{field:"service.name",header:"Layanan"},{body:l(({data:e})=>[a("div",We,[a("img",{alt:e.service.name,src:e.image_url,width:"32",style:{"vertical-align":"middle"}},null,8,Ye),a("span",null,B(e.service.name),1)])]),filter:l(({filterModel:e})=>[t(E,{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(U,{field:"name",header:"Benefit",class:"min-w-[15rem]"},{body:l(({data:e})=>[M(B(e.name),1)]),filter:l(({filterModel:e})=>[t(E,{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,type:"text",placeholder:"Cari Benefit"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(U,{header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:l(({data:e})=>[t(j,{value:i(e.service.status),severity:h(e.service.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:l(({filterModel:e})=>[t(n(D),{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,options:n(b),placeholder:"Pilih",showClear:""},{value:l(f=>[t(j,{value:i(f.value),severity:h(f.value)},null,8,["value","severity"])]),option:l(f=>[t(j,{value:i(f.option),severity:h(f.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(U,{header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[12rem]"},{body:l(({data:e})=>[M(B(w(e.updated_at)),1)]),filter:l(({filterModel:e})=>[t(n(ge),{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(U,{field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:l(({data:e})=>[a("div",Je,[ee(t(C,{icon:"pi pi-pencil",severity:"info",text:"",onClick:s[3]||(s[3]=f=>d.value=!0)},null,512),[[P,"Ubah",void 0,{bottom:!0}]]),ee(t(C,{icon:"pi pi-trash",severity:"danger",text:"",onClick:s[4]||(s[4]=f=>r(f))},null,512),[[P,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(n(be)),t(Z,{visible:n(_),"onUpdate:visible":s[8]||(s[8]=e=>H(_)?_.value=e:null),maximizable:"",modal:"",header:"Tambah Benefit",class:"sm:w-1/2 w-full"},{default:l(()=>[t(ie,{service:n(T),onOnClose:s[6]||(s[6]=e=>_.value=!1),onOnSave:s[7]||(s[7]=e=>_.value=!1)},null,8,["service"])]),_:1},8,["visible"]),t(Z,{visible:n(d),"onUpdate:visible":s[11]||(s[11]=e=>H(d)?d.value=e:null),maximizable:"",modal:"",header:"Ubah Benefit",class:"sm:w-1/2 w-full"},{default:l(()=>[t(re,{benefitsId:1,onOnClose:s[9]||(s[9]=e=>d.value=!1),onOnSave:s[10]||(s[10]=e=>d.value=!1)})]),_:1},8,["visible"])],64)}}});export{ft as default};
