import{s as j}from"./index-e5790c63.js";import{s as E}from"./index-f0881cfa.js";import{s as H}from"./index-06e3835f.js";import{s as N}from"./index-e0e5b80b.js";import{S as Z}from"./service-9c8b8866.js";import{S as W}from"./serviceCategory-df1ae8a6.js";import{p as z,q as D,X as Y,S as G,o as g,c as K,a,h as t,x as l,w as i,t as $,n as B,k as L,N as q,W as se,v as h,z as R,K as ne,P as I,L as J,Y as C,$ as A}from"./index-e0d75a13.js";import{s as ie}from"./index-42ad6c51.js";import{s as re,a as ue}from"./index-a2531aa6.js";import{s as de,a as ce}from"./index-2027fdd7.js";import{_ as me}from"./TopBreadcrumb-60cc11dd.js";import{s as pe}from"./index-3ee834f2.js";import{s as ve}from"./index-5c0689e0.js";import"./index-88efbbee.js";import"./index-f0ff238c.js";import"./index-f88263aa.js";import"./index-9f6afe1c.js";import"./index-1bf76131.js";import"./index-d57e57a7.js";import"./_plugin-vue_export-helper-c27b6911.js";const fe={class:"flex flex-col gap-2 mb-4"},ye={class:"flex flex-col gap-2 mb-4"},ge={key:0,class:"flex gap-4 items-center"},_e=["src"],be={class:"m-0"},xe={class:"flex gap-4 items-center"},Se=["src"],$e={class:"m-0"},we={class:"flex flex-col gap-2"},Ve={class:"flex justify-end gap-2 mt-8"},he=z({__name:"EditCategory",props:{detail:{type:Object,required:!0}},emits:["on-close","on-save"],setup(M,{emit:T}){const c=M,_=T,S=Z(),w=W(),d=D([0,1]),m=D({name:c.detail.name,service:{id:c.detail.service.id,name:c.detail.service.name,image_url:c.detail.image_url},status:c.detail.status});async function y(){var u;const n={_method:"PATCH",name:m.name,status:m.status,service_id:(u=m==null?void 0:m.service)==null?void 0:u.id};await w.updateServiceCategory(c.detail.id,n),_("on-save")}function v(n){switch(n){case 0:return"danger";case 1:return"success"}}function b(n){switch(n){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const f=Y(()=>S.serviceAll||[]);return G(async()=>{await S.fetchService()}),(n,u)=>{const V=H,x=E,r=j;return g(),K(q,null,[a("div",fe,[u[5]||(u[5]=a("label",{for:"name"},"Nama Kategori",-1)),t(V,{modelValue:l(m).name,"onUpdate:modelValue":u[0]||(u[0]=o=>l(m).name=o),id:"name","aria-describedby":"name-help",placeholder:"Nama Kategori"},null,8,["modelValue"])]),a("div",ye,[u[6]||(u[6]=a("label",{for:"desc"},"Layanan",-1)),t(l(N),{modelValue:l(m).service,"onUpdate:modelValue":u[1]||(u[1]=o=>l(m).service=o),value:l(m).service,optionLabel:"name",options:l(f),placeholder:"Pilih Layanan"},{value:i(o=>[o.value!=null?(g(),K("div",ge,[a("img",{src:o.value.image_url,alt:"",class:"h-4"},null,8,_e),a("p",be,$(o.value.name),1)])):B("",!0)]),option:i(o=>[a("div",xe,[a("img",{src:o.option.image_url,alt:"",class:"h-4"},null,8,Se),a("p",$e,$(o.option.name),1)])]),_:1},8,["modelValue","value","options"])]),a("div",we,[u[7]||(u[7]=a("label",{for:"desc"},"Status",-1)),t(l(N),{modelValue:l(m).status,"onUpdate:modelValue":u[2]||(u[2]=o=>l(m).status=o),options:l(d),placeholder:"Pilih Status"},{value:i(o=>[o.value!=null?(g(),L(x,{key:0,value:b(o.value),severity:v(o.value)},null,8,["value","severity"])):B("",!0)]),option:i(o=>[t(x,{value:b(o.option),severity:v(o.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",Ve,[t(r,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:u[3]||(u[3]=o=>_("on-close"))}),t(r,{type:"button",label:"Simpan",onClick:u[4]||(u[4]=o=>y())})])],64)}}}),Ce={class:"flex flex-col gap-2 mb-4"},Te={class:"flex flex-col gap-2 mb-4"},ke={key:0,class:"flex gap-4 items-center"},Ue=["src"],Ae={class:"m-0"},Ne={class:"flex gap-4 items-center"},De=["src"],Ke={class:"m-0"},Be={class:"flex flex-col gap-2"},Ie={class:"flex justify-end gap-2 mt-8"},Le=z({__name:"AddCategory",emits:["on-close","on-save"],setup(M,{emit:T}){const c=T,_=Z(),S=W(),w=D([0,1]),d=D({name:"",price:0,service:null,status:null});async function m(){var n;const f={name:d.name,status:d.status,service_id:(n=d==null?void 0:d.service)==null?void 0:n.id};await S.addServiceCategory(f),c("on-save")}function y(f){switch(f){case 0:return"danger";case 1:return"success"}}function v(f){switch(f){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const b=Y(()=>_.serviceAll||[]);return G(async()=>{await _.fetchService()}),(f,n)=>{const u=H,V=E,x=j;return g(),K(q,null,[a("div",Ce,[n[5]||(n[5]=a("label",{for:"name"},"Nama Kategori",-1)),t(u,{modelValue:l(d).name,"onUpdate:modelValue":n[0]||(n[0]=r=>l(d).name=r),id:"name","aria-describedby":"name-help",placeholder:"Nama Kategori"},null,8,["modelValue"])]),a("div",Te,[n[6]||(n[6]=a("label",{for:"desc"},"Layanan",-1)),t(l(N),{modelValue:l(d).service,"onUpdate:modelValue":n[1]||(n[1]=r=>l(d).service=r),options:l(b),placeholder:"Pilih Layanan"},{value:i(r=>[r.value!=null?(g(),K("div",ke,[a("img",{src:r.value.image_url,alt:"",class:"h-4"},null,8,Ue),a("p",Ae,$(r.value.name),1)])):B("",!0)]),option:i(r=>[a("div",Ne,[a("img",{src:r.option.image_url,alt:"",class:"h-4"},null,8,De),a("p",Ke,$(r.option.name),1)])]),_:1},8,["modelValue","options"])]),a("div",Be,[n[7]||(n[7]=a("label",{for:"desc"},"Status",-1)),t(l(N),{modelValue:l(d).status,"onUpdate:modelValue":n[2]||(n[2]=r=>l(d).status=r),options:l(w),placeholder:"Pilih Status"},{value:i(r=>[r.value!=null?(g(),L(V,{key:0,value:v(r.value),severity:y(r.value)},null,8,["value","severity"])):B("",!0)]),option:i(r=>[t(V,{value:v(r.option),severity:y(r.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",Ie,[t(x,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:n[3]||(n[3]=r=>c("on-close"))}),t(x,{type:"button",label:"Simpan",onClick:n[4]||(n[4]=r=>m())})])],64)}}}),Me={class:"card mt-8"},Fe={class:"flex flex-col md:flex-row justify-between gap-4"},Oe={class:"flex items-center gap-4 md:order-2 order-1"},Re={class:"hidden md:flex"},je={class:"flex md:hidden"},Ee={class:"flex flex-col items-center gap-2"},He=["alt","src"],We={class:"flex gap-4 items-center"},ct=z({__name:"MasterCategory",setup(M){const T=se(),c=W(),_=h(),S=h(null),w=h(0),d=h({global:{value:null,matchMode:C.CONTAINS},"service.name":{operator:A.AND,constraints:[{value:null,matchMode:C.STARTS_WITH}]},price:{operator:A.AND,constraints:[{value:null,matchMode:C.STARTS_WITH}]},name:{operator:A.AND,constraints:[{value:null,matchMode:C.STARTS_WITH}]},updated_at:{operator:A.AND,constraints:[{value:null,matchMode:C.DATE_IS}]},status:{operator:A.OR,constraints:[{value:null,matchMode:C.EQUALS}]}}),m=D([1,0]),y=h(!1),v=h(!1);function b(o){switch(o){case 0:return"danger";case 1:return"success"}}function f(o){switch(o){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}function n(o){return new Date(o).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const u=o=>{_.value.exportCSV()},V=o=>{T.require({target:o.currentTarget,message:"Yakin ingin menghapus service problem ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await c.delete(o),await c.fetchServiceCategory("",0)},reject:()=>{}})};async function x(){await c.fetchServiceCategory("",0),w.value+=1}const r=Y(()=>c.serviceCategoryAll||[]);return G(async()=>{await c.fetchServiceCategory("",0)}),(o,s)=>{const P=me,k=j,ee=de,F=H,te=ce,U=ue,O=E,ae=re,le=Le,Q=ie,oe=he,X=ne("tooltip");return g(),K(q,null,[t(P,{breadcrumbItems:[{label:"Master"},{label:"Kategori"}]}),a("div",Me,[s[13]||(s[13]=a("div",{class:"font-semibold text-xl mb-4"},"Data Kategori",-1)),(g(),L(ae,{ref_key:"dt",ref:_,key:l(w),value:l(r),rowGroupMode:"rowspan",groupRowsBy:"service.name",paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:l(d),"onUpdate:filters":s[3]||(s[3]=e=>R(d)?d.value=e:null),filterDisplay:"menu",loading:l(c).isLoading,globalFilterFields:["service.name","name","price","status","updated_at"],showGridlines:""},{header:i(()=>[a("div",Fe,[t(k,{type:"button",icon:"pi pi-plus",label:"Tambah Kategori",class:"md:order-1 order-2",onClick:s[0]||(s[0]=e=>v.value=!0)}),a("div",Oe,[a("div",Re,[t(k,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:s[1]||(s[1]=e=>u(e))})]),a("div",je,[t(k,{type:"button",icon:"pi pi-download",outlined:""})]),t(te,{class:"w-full md:w-auto"},{default:i(()=>[t(ee,null,{default:i(()=>s[10]||(s[10]=[a("i",{class:"pi pi-search"},null,-1)])),_:1}),t(F,{modelValue:l(d).global.value,"onUpdate:modelValue":s[2]||(s[2]=e=>l(d).global.value=e),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:i(()=>s[11]||(s[11]=[I(" Tidak ada data Kategori. ")])),loading:i(()=>s[12]||(s[12]=[I(" Memuat data Kategori. Mohon tunggu. ")])),default:i(()=>[t(U,{field:"service.name",header:"Layanan"},{body:i(({data:e})=>[a("div",Ee,[a("img",{alt:e.service.name,src:e.image_url,width:"32",style:{"vertical-align":"middle"}},null,8,He),a("span",null,$(e.service.name),1)])]),filter:i(({filterModel:e})=>[t(F,{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(U,{field:"name",header:"Nama Kategori",class:"min-w-[15rem]"},{body:i(({data:e})=>[I($(e.name),1)]),filter:i(({filterModel:e})=>[t(F,{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(U,{header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:i(({data:e})=>[t(O,{value:f(e.status),severity:b(e.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:i(({filterModel:e})=>[t(l(N),{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,options:l(m),placeholder:"Pilih",showClear:""},{value:i(p=>[p.value?(g(),L(O,{key:0,value:f(p.value),severity:b(p.value)},null,8,["value","severity"])):B("",!0)]),option:i(p=>[t(O,{value:f(p.option),severity:b(p.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(U,{header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[12rem]"},{body:i(({data:e})=>[I($(n(e.updated_at)),1)]),filter:i(({filterModel:e})=>[t(l(pe),{modelValue:e.value,"onUpdate:modelValue":p=>e.value=p,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(U,{field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:i(({data:e})=>[a("div",We,[J(t(k,{icon:"pi pi-pencil",severity:"info",text:"",onClick:p=>(S.value=e,y.value=!0)},null,8,["onClick"]),[[X,"Ubah",void 0,{bottom:!0}]]),J(t(k,{icon:"pi pi-trash",severity:"danger",text:"",onClick:p=>V(e.id)},null,8,["onClick"]),[[X,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(l(ve)),t(Q,{visible:l(v),"onUpdate:visible":s[6]||(s[6]=e=>R(v)?v.value=e:null),maximizable:"",modal:"",header:"Tambah Kategori",class:"sm:w-1/2 w-full"},{default:i(()=>[t(le,{onOnClose:s[4]||(s[4]=e=>v.value=!1),onOnSave:s[5]||(s[5]=e=>(v.value=!1,x()))})]),_:1},8,["visible"]),t(Q,{visible:l(y),"onUpdate:visible":s[9]||(s[9]=e=>R(y)?y.value=e:null),maximizable:"",modal:"",header:"Ubah Kategori",class:"sm:w-1/2 w-full"},{default:i(()=>[t(oe,{detail:l(S),onOnClose:s[7]||(s[7]=e=>y.value=!1),onOnSave:s[8]||(s[8]=e=>(y.value=!1,x()))},null,8,["detail"])]),_:1},8,["visible"])],64)}}});export{ct as default};
