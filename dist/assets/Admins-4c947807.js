import{s as M}from"./index-f8a1cad7.js";import{s as W}from"./index-503a0559.js";import{s as q,a as z}from"./index-36592ca2.js";import{s as Y}from"./index-ddc9d307.js";import{s as D}from"./index-c3a9aed6.js";import{s as P}from"./index-f0f285fd.js";import{U as K}from"./users-86dbeba8.js";import{L as J}from"./location-1e4e8947.js";import{d as B,r as Q,V as h,P as H,o as E,c as G,b as n,f as o,e as l,J as r,N as w,L as O,S as oe,a as V,i as N,z as ae,t as S,D as R,W as U,X as I}from"./index-e5ca3fe9.js";import{s as te}from"./index-a600e3b7.js";import{s as ne,a as ie}from"./index-14910fd4.js";import{s as se,a as de}from"./index-3531a741.js";import{_ as me}from"./TopBreadcrumb-e2acffae.js";import{s as re}from"./index-d7cabaf1.js";import"./index-d21f1610.js";import"./index-65cea784.js";import"./index-96e40a09.js";import"./index-8b098753.js";import"./index-fc9686cf.js";import"./_plugin-vue_export-helper-c27b6911.js";const pe={class:"flex flex-col gap-2 mb-4"},ue={class:"flex flex-col gap-2 mb-4"},ce={class:"flex flex-col gap-2 mb-4"},fe={class:"mb-4 flex flex-col gap-2"},ve={class:"mb-4 flex flex-col gap-2"},be={class:"mb-4 flex flex-col gap-2"},ge={class:"flex justify-end gap-2 mt-8"},ye=B({__name:"EditAdmin",props:{data:{type:Object,required:!0}},emits:["on-close","on-save"],setup(T,{emit:x}){const k=K(),c=J(),b=x,d=T,i=Q({name:d.data.name||"",email:d.data.email||"",phone:d.data.phone?d.data.phone.slice(3):null,selectedProvince:{id:null,name:null},selectedCity:{id:null,name:null},password:d.data.password||""}),f=h(()=>c.provinces.map(e=>({id:e.id,name:e.nama}))),$=h(()=>c.cities.map(e=>({id:e.id,name:e.nama})));async function C(){await c.fetchCities(0);const e=c.cities.find(v=>v.id===d.data.city_id);i.selectedCity.id=e.id,i.selectedCity.name=e.nama;let a=e.province.id,y=e.province.nama;await c.fetchProvinces(),i.selectedProvince.id=a,i.selectedProvince.name=y}H(async()=>{await C()});async function u(){var a;const e={_method:"PATCH",name:i.name,email:i.email,phone:`+62${((a=i.phone)==null?void 0:a.toString())||""}`,city_id:i.selectedCity.id};i.password&&(e.password=i.password),await k.update(e,d.data.id),b("on-save")}return(e,a)=>{const y=D,v=q,s=Y,_=z,m=W,L=M;return E(),G(O,null,[n("div",pe,[a[9]||(a[9]=n("label",{for:"name"},"Nama Admin",-1)),o(y,{modelValue:l(i).name,"onUpdate:modelValue":a[0]||(a[0]=p=>l(i).name=p),id:"name","aria-describedby":"name-help",placeholder:"Masukkan nama lengkap admin"},null,8,["modelValue"])]),n("div",ue,[a[10]||(a[10]=n("label",{for:"email"},"Nomor Hp Admin",-1)),o(y,{modelValue:l(i).email,"onUpdate:modelValue":a[1]||(a[1]=p=>l(i).email=p),id:"email","aria-describedby":"phone-help",placeholder:"Masukkan email admin"},null,8,["modelValue"])]),n("div",ce,[a[12]||(a[12]=n("label",{for:"phone"},"Nomor Hp",-1)),o(_,null,{default:r(()=>[o(v,null,{default:r(()=>a[11]||(a[11]=[w(" +62 ")])),_:1}),o(s,{modelValue:l(i).phone,"onUpdate:modelValue":a[2]||(a[2]=p=>l(i).phone=p),id:"phone",inputId:"withoutgrouping",useGrouping:!1,fluid:"",placeholder:"Masukkan no hp admin"},null,8,["modelValue"])]),_:1})]),n("div",fe,[a[13]||(a[13]=n("label",{for:"prov"},"Provinsi",-1)),o(l(P),{inputId:"prov",modelValue:l(i).selectedProvince,"onUpdate:modelValue":a[3]||(a[3]=p=>l(i).selectedProvince=p),loading:l(c).isLoadingProvince,onChange:a[4]||(a[4]=p=>C()),disabled:l(f).length<1,options:l(f),filter:"",optionLabel:"name",fluid:"",placeholder:"Pilih provinsi"},null,8,["modelValue","loading","disabled","options"])]),n("div",ve,[a[14]||(a[14]=n("label",{for:"city"},"Kota/Kabupaten",-1)),o(l(P),{inputId:"city",modelValue:l(i).selectedCity,"onUpdate:modelValue":a[5]||(a[5]=p=>l(i).selectedCity=p),loading:l(c).isLoadingCities,options:l($),filter:"",optionLabel:"name",fluid:"",placeholder:"Pilih kabupaten/kota"},null,8,["modelValue","loading","options"])]),n("div",be,[a[15]||(a[15]=n("label",{for:"city"},"Kata Sandi",-1)),o(m,{modelValue:l(i).password,"onUpdate:modelValue":a[6]||(a[6]=p=>l(i).password=p),fluid:"",toggleMask:"",promptLabel:"Masukkan Password",weakLabel:"Kurang Kuat",mediumLabel:"Cukup Kuat",strongLabel:"Sangat kuat"},null,8,["modelValue"])]),n("div",ge,[o(L,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:a[7]||(a[7]=p=>b("on-close"))}),o(L,{type:"button",label:"Simpan",loading:l(k).isLoading,onClick:a[8]||(a[8]=p=>u())},null,8,["loading"])])],64)}}}),Ve={class:"flex flex-col gap-2 mb-4"},xe={class:"flex flex-col gap-2 mb-4"},ke={class:"flex flex-col gap-2 mb-4"},we={class:"mb-4 flex flex-col gap-2"},$e={class:"mb-4 flex flex-col gap-2"},Ce={class:"mb-4 flex flex-col gap-2"},_e={class:"flex justify-end gap-2 mt-8"},Ae=B({__name:"AddAdmin",emits:["on-close","on-save"],setup(T,{emit:x}){const k=K(),c=J(),b=x,d=Q({name:"",email:"",phone:null,selectedProvince:{},selectedCity:{},password:""}),i=h(()=>c.provinces.map(u=>({id:u.id,name:u.nama}))),f=h(()=>c.cities.map(u=>({id:u.id,name:u.nama})));async function $(u){await c.fetchCities(u.value.id)}H(async()=>{await c.fetchProvinces()});async function C(){var e;let u={name:d.name,email:d.email,phone:`+62${((e=d.phone)==null?void 0:e.toString())||""}`,city_id:d.selectedCity.id,password:d.password,role_id:2};await k.create(u),b("on-save")}return(u,e)=>{const a=D,y=q,v=Y,s=z,_=M;return E(),G(O,null,[n("div",Ve,[e[9]||(e[9]=n("label",{for:"name"},"Nama Admin",-1)),o(a,{modelValue:l(d).name,"onUpdate:modelValue":e[0]||(e[0]=m=>l(d).name=m),id:"name","aria-describedby":"name-help",placeholder:"Masukkan nama lengkap admin"},null,8,["modelValue"])]),n("div",xe,[e[10]||(e[10]=n("label",{for:"email"},"Email",-1)),o(a,{modelValue:l(d).email,"onUpdate:modelValue":e[1]||(e[1]=m=>l(d).email=m),id:"email","aria-describedby":"phone-help",placeholder:"Masukkan email admin"},null,8,["modelValue"])]),n("div",ke,[e[12]||(e[12]=n("label",{for:"phone"},"Nomor Hp",-1)),o(s,null,{default:r(()=>[o(y,null,{default:r(()=>e[11]||(e[11]=[w(" +62 ")])),_:1}),o(v,{modelValue:l(d).phone,"onUpdate:modelValue":e[2]||(e[2]=m=>l(d).phone=m),id:"phone",inputId:"withoutgrouping",useGrouping:!1,fluid:"",placeholder:"Masukkan no hp admin"},null,8,["modelValue"])]),_:1})]),n("div",we,[e[13]||(e[13]=n("label",{for:"prov"},"Provinsi",-1)),o(l(P),{inputId:"prov",modelValue:l(d).selectedProvince,"onUpdate:modelValue":e[3]||(e[3]=m=>l(d).selectedProvince=m),loading:l(c).isLoadingProvince,onChange:e[4]||(e[4]=m=>$(m)),disabled:l(i).length<1,options:l(i),filter:"",optionLabel:"name",fluid:"",placeholder:"Pilih provinsi"},null,8,["modelValue","loading","disabled","options"])]),n("div",$e,[e[14]||(e[14]=n("label",{for:"city"},"Kota/Kabupaten",-1)),o(l(P),{inputId:"city",modelValue:l(d).selectedCity,"onUpdate:modelValue":e[5]||(e[5]=m=>l(d).selectedCity=m),loading:l(c).isLoadingCities,disabled:l(f).length<1,options:l(f),filter:"",optionLabel:"name",fluid:"",placeholder:"Pilih kabupaten/kota"},null,8,["modelValue","loading","disabled","options"])]),n("div",Ce,[e[15]||(e[15]=n("label",{for:"city"},"Kata Sandi",-1)),o(l(W),{modelValue:l(d).password,"onUpdate:modelValue":e[6]||(e[6]=m=>l(d).password=m),fluid:"",toggleMask:"",promptLabel:"Masukkan Password",weakLabel:"Kurang Kuat",mediumLabel:"Cukup Kuat",strongLabel:"Sangat kuat"},null,8,["modelValue"])]),n("div",_e,[o(_,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:e[7]||(e[7]=m=>b("on-close"))}),o(_,{type:"button",label:"Simpan",disabled:u.$isQueryInvalid(l(d)),loading:l(k).isLoading,onClick:e[8]||(e[8]=m=>C())},null,8,["disabled","loading"])])],64)}}}),Ue={class:"card mt-8"},Le={class:"flex flex-col md:flex-row justify-between gap-4"},Se={class:"flex items-center gap-4 md:order-2 order-1"},Ie={class:"hidden md:flex"},Pe={class:"flex md:hidden"},he=["href"],Te={class:"flex gap-4 items-center"},el=B({__name:"Admins",setup(T){const x=K(),k=oe(),c=V(),b=V({global:{value:null,matchMode:U.CONTAINS},name:{operator:I.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},email:{operator:I.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},phone:{operator:I.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},"location.name":{operator:I.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]}}),d=V(!1);V(null);const i=V(!1),f=V(!1),$=V(null),C=V(0);async function u(){await x.getAll(2),C.value+=1}const e=v=>{c.value.exportCSV()},a=v=>{k.require({target:v.currentTarget,message:"Yakin ingin menghapus users admin ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await x.delete(v),await u()},reject:()=>{}})};function y(v){$.value=v,i.value=!0}return H(async()=>{await u()}),(v,s)=>{const _=me,m=M,L=se,p=D,X=de,A=ie,Z=ne,ee=Ae,j=te,le=ye,F=ae("tooltip");return E(),G(O,null,[o(_,{breadcrumbItems:[{label:"Admin"}]}),n("div",Ue,[s[13]||(s[13]=n("div",{class:"font-semibold text-xl mb-4"},"Data Admin",-1)),o(Z,{ref_key:"dt",ref:c,value:l(x).users,paginator:!0,rows:10,dataKey:"id",filters:l(b),"onUpdate:filters":s[3]||(s[3]=t=>N(b)?b.value=t:null),filterDisplay:"menu",loading:l(d),globalFilterFields:["name","email","phone","location.name"],showGridlines:""},{header:r(()=>[n("div",Le,[o(m,{type:"button",icon:"pi pi-plus",label:"Tambah Admin",class:"md:order-1 order-2",onClick:s[0]||(s[0]=t=>f.value=!0)}),n("div",Se,[n("div",Ie,[o(m,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:s[1]||(s[1]=t=>e(t))})]),n("div",Pe,[o(m,{type:"button",icon:"pi pi-download",outlined:""})]),o(X,{class:"w-full md:w-auto"},{default:r(()=>[o(L,null,{default:r(()=>s[10]||(s[10]=[n("i",{class:"pi pi-search"},null,-1)])),_:1}),o(p,{modelValue:l(b).global.value,"onUpdate:modelValue":s[2]||(s[2]=t=>l(b).global.value=t),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:r(()=>s[11]||(s[11]=[w(" Tidak ada data Admin. ")])),loading:r(()=>s[12]||(s[12]=[w(" Memuat data Admin. Mohon tunggu. ")])),default:r(()=>[o(A,{sortable:"",field:"name",header:"Nama",class:"min-w-[15rem]"},{body:r(({data:t})=>[w(S(t.name),1)]),filter:r(({filterModel:t})=>[o(p,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,type:"text",placeholder:"Cari Admin"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(A,{sortable:"",field:"email",header:"Alamat Email",class:"min-w-[15rem]"},{body:r(({data:t})=>[n("a",{href:"mailto:"+t.email,class:"text-blue-400 hover:text-blue-500 transition-all",target:"_blank"},S(t.email),9,he)]),filter:r(({filterModel:t})=>[o(p,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,type:"text",placeholder:"Cari Admin"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(A,{sortable:"",field:"phone",header:"Nomor Hp",class:"min-w-[15rem]"},{body:r(({data:t})=>[w(S(t.phone??"-"),1)]),filter:r(({filterModel:t})=>[o(p,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,type:"text",placeholder:"Cari Admin"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(A,{sortable:"",field:"location.name",header:"Lokasi",class:"min-w-[15rem]"},{body:r(({data:t})=>[w(S(t.city.nama),1)]),filter:r(({filterModel:t})=>[o(p,{modelValue:t.value,"onUpdate:modelValue":g=>t.value=g,type:"text",placeholder:"Cari Lokasi"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(A,{sortable:"",field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:r(({data:t})=>[n("div",Te,[R(o(m,{icon:"pi pi-pencil",severity:"info",text:"",onClick:g=>y(t)},null,8,["onClick"]),[[F,"Ubah",void 0,{bottom:!0}]]),R(o(m,{icon:"pi pi-trash",severity:"danger",text:"",onClick:g=>a(t.id)},null,8,["onClick"]),[[F,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"])]),o(l(re)),o(j,{visible:l(f),"onUpdate:visible":s[6]||(s[6]=t=>N(f)?f.value=t:null),maximizable:"",modal:"",header:"Tambah Admin",class:"sm:w-1/2 w-full"},{default:r(()=>[o(ee,{onOnClose:s[4]||(s[4]=t=>f.value=!1),onOnSave:s[5]||(s[5]=t=>(f.value=!1,u()))})]),_:1},8,["visible"]),o(j,{visible:l(i),"onUpdate:visible":s[9]||(s[9]=t=>N(i)?i.value=t:null),maximizable:"",modal:"",header:"Ubah Admin",class:"sm:w-1/2 w-full"},{default:r(()=>[o(le,{data:l($),onOnClose:s[7]||(s[7]=t=>i.value=!1),onOnSave:s[8]||(s[8]=t=>(i.value=!1,u()))},null,8,["data"])]),_:1},8,["visible"])],64)}}});export{el as default};
