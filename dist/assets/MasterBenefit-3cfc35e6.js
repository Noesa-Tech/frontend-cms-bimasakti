import{s as q}from"./index-17ecf855.js";import{s as z}from"./index-93c23dc8.js";import{s as K}from"./index-deef9e19.js";import{s as L}from"./index-2c1f3185.js";import{a0 as oe,a1 as D,a2 as R,p as W,q as A,X as F,o as h,c as N,a as i,h as a,x as n,w as o,t as S,n as O,k as Y,N as G,W as re,v as T,S as ue,z as H,K as de,P as I,L as Z,Y as U,$ as M}from"./index-f6b298fd.js";import{s as ce}from"./index-4941a5df.js";import{s as me,a as ve}from"./index-24bd34c7.js";import{s as pe,a as fe}from"./index-a595e5d6.js";import{_ as ye}from"./TopBreadcrumb-a6563245.js";import{s as _e}from"./index-a7e8ba98.js";import{s as ge}from"./index-ae6d498b.js";import{S as be}from"./service-1d1740d2.js";import"./index-d19d791a.js";import"./index-e219d200.js";import"./index-1dd55c84.js";import"./index-6e668620.js";import"./index-4f6a2207.js";import"./index-d1d004c3.js";import"./_plugin-vue_export-helper-c27b6911.js";const Q=oe("ServiceBenefitStore",{state:()=>({isLoading:!1,serviceBenefitAll:[]}),actions:{async fetchServiceBenefit(){this.isLoading=!0;try{const m=await D.get("/auth/services-benefit");this.serviceBenefitAll=m.data}catch{}finally{this.isLoading=!1}},async addServiceBenefit(m){this.isLoading=!0;try{const v=await D.post("/auth/services-benefit",m);R("success",v.message)}catch{}finally{this.isLoading=!1}},async updateServiceBenefit(m,v){this.isLoading=!0;try{const d=await D.post(`/auth/services-benefit/${m}`,v);R("success",d.message)}catch{}finally{this.isLoading=!1}},async delete(m){this.isLoading=!0;try{const v=await D.delete(`/auth/services-benefit/${m}`);R("success",v.message)}catch{}finally{this.isLoading=!1}}}}),he={class:"flex flex-col gap-2 mb-4"},Be={class:"flex flex-col gap-2 mb-4"},xe={key:0,class:"flex gap-4 items-center"},Se=["src"],$e={class:"m-0"},we={class:"flex gap-4 items-center"},Ve=["src"],Te={class:"m-0"},ke={class:"flex flex-col gap-2"},Ce={class:"flex justify-end gap-2 mt-8"},Ue=W({__name:"EditBenefits",props:{service:{type:[],required:!0},serviceBenefit:{type:Object,required:!0}},emits:["on-close","on-save"],setup(m,{emit:v}){const d=m,p=v,$=Q(),g=A([0,1]),r=A({name:d.serviceBenefit.name,service:{id:d.serviceBenefit.service.id,name:d.serviceBenefit.service.name,image_url:d.serviceBenefit.image_url},status:d.serviceBenefit.status});async function w(){var t;const u={...r,_method:"PATCH",service_id:((t=r==null?void 0:r.service)==null?void 0:t.id)||null};await $.updateServiceBenefit(d.serviceBenefit.id,u),p("on-save")}function B(u){switch(u){case 0:return"danger";case 1:return"success"}}function f(u){switch(u){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const y=F(()=>d.service||[]);return(u,t)=>{const V=K,x=z,b=q;return h(),N(G,null,[i("div",he,[t[5]||(t[5]=i("label",{for:"name"},"Nama Benefit",-1)),a(V,{modelValue:n(r).name,"onUpdate:modelValue":t[0]||(t[0]=e=>n(r).name=e),id:"name","aria-describedby":"name-help",placeholder:"Nama Benefit"},null,8,["modelValue"])]),i("div",Be,[t[6]||(t[6]=i("label",{for:"desc"},"Layanan",-1)),a(n(L),{modelValue:n(r).service,"onUpdate:modelValue":t[1]||(t[1]=e=>n(r).service=e),value:n(r).service,optionLabel:"name",options:n(y),placeholder:"Pilih Layanan"},{value:o(e=>[e.value!=null?(h(),N("div",xe,[i("img",{src:e.value.image_url,alt:"",class:"h-4"},null,8,Se),i("p",$e,S(e.value.name),1)])):O("",!0)]),option:o(e=>[i("div",we,[i("img",{src:e.option.image_url,alt:"",class:"h-4"},null,8,Ve),i("p",Te,S(e.option.name),1)])]),_:1},8,["modelValue","value","options"])]),i("div",ke,[t[7]||(t[7]=i("label",{for:"desc"},"Status",-1)),a(n(L),{modelValue:n(r).status,"onUpdate:modelValue":t[2]||(t[2]=e=>n(r).status=e),options:n(g),placeholder:"Pilih Status"},{value:o(e=>[e.value!=null?(h(),Y(x,{key:0,value:f(e.value),severity:B(e.value)},null,8,["value","severity"])):O("",!0)]),option:o(e=>[a(x,{value:f(e.option),severity:B(e.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),i("div",Ce,[a(b,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:t[3]||(t[3]=e=>p("on-close"))}),a(b,{type:"button",label:"Simpan",onClick:t[4]||(t[4]=e=>w())})])],64)}}}),Le={class:"flex flex-col gap-2 mb-4"},Ae={class:"flex flex-col gap-2 mb-4"},Ne={key:0,class:"flex gap-4 items-center"},De=["src"],Ie={class:"m-0"},Me={class:"flex gap-4 items-center"},Fe=["src"],Oe={class:"m-0"},je={class:"flex flex-col gap-2"},Ee={class:"flex justify-end gap-2 mt-8"},Re=W({__name:"AddBenefits",props:{service:{type:[],required:!0}},emits:["on-close","on-save"],setup(m,{emit:v}){const d=m,p=v,$=Q(),g=A([0,1]),r=A({name:"",service:null,status:null});async function w(){var t;const u={...r,service_id:((t=r==null?void 0:r.service)==null?void 0:t.id)||null};await $.addServiceBenefit(u),p("on-save")}function B(u){switch(u){case 0:return"danger";case 1:return"success"}}function f(u){switch(u){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const y=F(()=>d.service||[]);return(u,t)=>{const V=K,x=z,b=q;return h(),N(G,null,[i("div",Le,[t[5]||(t[5]=i("label",{for:"name"},"Nama Benefit",-1)),a(V,{modelValue:n(r).name,"onUpdate:modelValue":t[0]||(t[0]=e=>n(r).name=e),id:"name","aria-describedby":"name-help",placeholder:"Nama Benefit"},null,8,["modelValue"])]),i("div",Ae,[t[6]||(t[6]=i("label",{for:"desc"},"Layanan",-1)),a(n(L),{modelValue:n(r).service,"onUpdate:modelValue":t[1]||(t[1]=e=>n(r).service=e),optionLabel:"name",options:n(y),placeholder:"Pilih Layanan"},{value:o(e=>[e.value!=null?(h(),N("div",Ne,[i("img",{src:e.value.image_url,alt:"",class:"h-4"},null,8,De),i("p",Ie,S(e.value.name),1)])):O("",!0)]),option:o(e=>[i("div",Me,[i("img",{src:e.option.image_url,alt:"",class:"h-4"},null,8,Fe),i("p",Oe,S(e.option.name),1)])]),_:1},8,["modelValue","options"])]),i("div",je,[t[7]||(t[7]=i("label",{for:"desc"},"Status",-1)),a(n(L),{modelValue:n(r).status,"onUpdate:modelValue":t[2]||(t[2]=e=>n(r).status=e),options:n(g),placeholder:"Pilih Status"},{value:o(e=>[e.value!=null?(h(),Y(x,{key:0,value:f(e.value),severity:B(e.value)},null,8,["value","severity"])):O("",!0)]),option:o(e=>[a(x,{value:f(e.option),severity:B(e.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),i("div",Ee,[a(b,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:t[3]||(t[3]=e=>p("on-close"))}),a(b,{type:"button",label:"Simpan",onClick:t[4]||(t[4]=e=>w())})])],64)}}}),He={class:"card mt-8"},qe={class:"flex flex-col md:flex-row justify-between gap-4"},ze={class:"flex items-center gap-4 md:order-2 order-1"},Ke={class:"hidden md:flex"},We={class:"flex md:hidden"},Ye={class:"flex flex-col items-center gap-2"},Ge=["alt","src"],Qe={class:"flex gap-4 items-center"},ft=W({__name:"MasterBenefit",setup(m){const v=re(),d=be(),p=Q(),$=T(),g=T({global:{value:null,matchMode:U.CONTAINS},"service.name":{operator:M.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},name:{operator:M.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},updated_at:{operator:M.AND,constraints:[{value:null,matchMode:U.DATE_IS}]},status:{operator:M.OR,constraints:[{value:null,matchMode:U.EQUALS}]}}),r=T(0),w=T(null),B=A([1,0]),f=T(!1),y=T(!1);function u(_){switch(_){case 0:return"danger";case 1:return"success"}}function t(_){switch(_){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}async function V(){await p.fetchServiceBenefit(),r.value+=1}const x=F(()=>p.serviceBenefitAll||[]),b=F(()=>d.serviceAll||[]);function e(_){return new Date(_).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const P=_=>{$.value.exportCSV()},ee=_=>{v.require({target:_.currentTarget,message:"Yakin ingin menghapus service benefit ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await p.delete(_),await p.fetchServiceBenefit()},reject:()=>{}})};return ue(async()=>{await d.fetchService(1),await p.fetchServiceBenefit()}),(_,l)=>{const te=ye,k=q,se=pe,j=K,ae=fe,C=ve,E=z,ne=me,ie=Re,X=ce,le=Ue,J=de("tooltip");return h(),N(G,null,[a(te,{breadcrumbItems:[{label:"Master"},{label:"Benefit"}]}),i("div",He,[l[13]||(l[13]=i("div",{class:"font-semibold text-xl mb-4"},"Data Benefit",-1)),(h(),Y(ne,{ref_key:"dt",ref:$,key:n(r),value:n(x),rowGroupMode:"rowspan",groupRowsBy:"service.name",paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:n(g),"onUpdate:filters":l[3]||(l[3]=s=>H(g)?g.value=s:null),filterDisplay:"menu",loading:n(p).isLoading,globalFilterFields:["service.name","name","status","updated_at"],showGridlines:""},{header:o(()=>[i("div",qe,[a(k,{type:"button",icon:"pi pi-plus",label:"Tambah Benefit",class:"md:order-1 order-2",onClick:l[0]||(l[0]=s=>y.value=!0)}),i("div",ze,[i("div",Ke,[a(k,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:l[1]||(l[1]=s=>P(s))})]),i("div",We,[a(k,{type:"button",icon:"pi pi-download",outlined:""})]),a(ae,{class:"w-full md:w-auto"},{default:o(()=>[a(se,null,{default:o(()=>l[10]||(l[10]=[i("i",{class:"pi pi-search"},null,-1)])),_:1}),a(j,{modelValue:n(g).global.value,"onUpdate:modelValue":l[2]||(l[2]=s=>n(g).global.value=s),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:o(()=>l[11]||(l[11]=[I(" Tidak ada data Benefit. ")])),loading:o(()=>l[12]||(l[12]=[I(" Memuat data Benefit. Mohon tunggu. ")])),default:o(()=>[a(C,{field:"service.name",header:"Layanan"},{body:o(({data:s})=>[i("div",Ye,[i("img",{alt:s.service.name,src:s.image_url,width:"32",style:{"vertical-align":"middle"}},null,8,Ge),i("span",null,S(s.service.name),1)])]),filter:o(({filterModel:s})=>[a(j,{modelValue:s.value,"onUpdate:modelValue":c=>s.value=c,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(C,{field:"name",header:"Benefit",class:"min-w-[15rem]"},{body:o(({data:s})=>[I(S(s.name),1)]),filter:o(({filterModel:s})=>[a(j,{modelValue:s.value,"onUpdate:modelValue":c=>s.value=c,type:"text",placeholder:"Cari Benefit"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(C,{header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:o(({data:s})=>[a(E,{value:t(s.status),severity:u(s.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:o(({filterModel:s})=>[a(n(L),{modelValue:s.value,"onUpdate:modelValue":c=>s.value=c,options:n(B),placeholder:"Pilih",showClear:""},{value:o(c=>[a(E,{value:t(c.value),severity:u(c.value)},null,8,["value","severity"])]),option:o(c=>[a(E,{value:t(c.option),severity:u(c.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),a(C,{header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[12rem]"},{body:o(({data:s})=>[I(S(e(s.updated_at)),1)]),filter:o(({filterModel:s})=>[a(n(_e),{modelValue:s.value,"onUpdate:modelValue":c=>s.value=c,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(C,{field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:o(({data:s})=>[i("div",Qe,[Z(a(k,{icon:"pi pi-pencil",severity:"info",text:"",onClick:c=>(w.value=s,f.value=!0)},null,8,["onClick"]),[[J,"Ubah",void 0,{bottom:!0}]]),Z(a(k,{icon:"pi pi-trash",severity:"danger",text:"",onClick:c=>ee(s.id)},null,8,["onClick"]),[[J,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),a(n(ge)),a(X,{visible:n(y),"onUpdate:visible":l[6]||(l[6]=s=>H(y)?y.value=s:null),maximizable:"",modal:"",header:"Tambah Benefit",class:"sm:w-1/2 w-full"},{default:o(()=>[a(ie,{service:n(b)||[],onOnClose:l[4]||(l[4]=s=>y.value=!1),onOnSave:l[5]||(l[5]=s=>(y.value=!1,V()))},null,8,["service"])]),_:1},8,["visible"]),a(X,{visible:n(f),"onUpdate:visible":l[9]||(l[9]=s=>H(f)?f.value=s:null),maximizable:"",modal:"",header:"Ubah Benefit",class:"sm:w-1/2 w-full"},{default:o(()=>[a(le,{service:n(b)||[],serviceBenefit:n(w),onOnClose:l[7]||(l[7]=s=>f.value=!1),onOnSave:l[8]||(l[8]=s=>(f.value=!1,V()))},null,8,["service","serviceBenefit"])]),_:1},8,["visible"])],64)}}});export{ft as default};
