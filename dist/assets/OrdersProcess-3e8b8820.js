import{s as ie,a as de}from"./index-adc43363.js";import{s as ue}from"./index-cc3a5053.js";import{s as ce,a as me}from"./index-054cffa9.js";import{s as pe}from"./index-2a809236.js";import{s as _e}from"./index-8d5d91a7.js";import{s as fe}from"./index-727622eb.js";import{s as ve,a as ye}from"./index-9e15c7a6.js";import{d as he,a as h,S as ge,a9 as be,r as U,V as H,P as Ve,c as y,f as t,b as o,E as x,J as a,e as r,L as A,z as xe,o as m,N as p,t as i,H as C,M,F as we,D as Te,W as d,X as u,aa as ke}from"./index-6fd353ed.js";import{s as Se,a as De}from"./index-010bf46f.js";import{s as Ie}from"./index-373cac24.js";import{_ as Ue}from"./TopBreadcrumb-5bc9eed2.js";import{s as B,a as F,b as L,c as O}from"./index-7feb40e6.js";import{s as Ae}from"./index-12387b00.js";import{s as W}from"./index-a48de1cd.js";import{s as Ce}from"./index-2ebf4360.js";import{V as Pe,s as $e}from"./vendor-84129101.js";import{O as Ne}from"./order-95db7010.js";import"./index-662d48a9.js";import"./index-d0d06c16.js";import"./index-077105b5.js";import"./index-d62b0b1b.js";import"./index-e60aa67a.js";import"./_plugin-vue_export-helper-c27b6911.js";const Re={class:"card mt-8"},He={class:"flex items-center justify-end gap-4 md:order-2 order-1"},Me={class:"hidden md:flex"},Be={class:"flex md:hidden"},Fe={class:"text-start"},Le={class:"m-0"},Oe={class:"m-0 text-sm text-muted-color"},We={class:"flex flex-col gap-4 w-[25rem]"},je={class:"flex gap-4 items-center"},ze={class:"flex flex-col gap-2"},Ke={class:"flex items-center justify-start gap-4"},qe=["src","alt"],Ee={class:"flex flex-col items-start text-start gap-4 w-full"},Ge={class:"flex flex-col gap-1 w-full"},Qe={class:"m-0 font-semibold"},Je={class:"border rounded-md"},Ye={class:"flex items-start justify-between gap-4"},Xe={class:"m-0"},Ze={class:"m-0"},et={class:"flex flex-col gap-2 p-2"},tt={class:"flex items-center justify-start gap-2"},at={class:"flex items-center justify-start gap-2"},ot={class:"m-0"},lt={class:"m-0"},st={class:"flex items-center gap-2"},nt={key:0},rt={key:1},it={class:"flex gap-4 items-center"},$t=he({__name:"OrdersProcess",setup(dt){h({});const P=h();h(),ge(),be();const $=h(),w=Ne(),N=Pe();U({vendor:null,reason:""});const j=h(0),g=h({global:{value:null,matchMode:d.CONTAINS},noInvoice:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"user.name":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"user.email":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"user.phone":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"service.name":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},"properties.name":{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},location:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},vendor:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},total_fee:{operator:u.AND,constraints:[{value:null,matchMode:d.STARTS_WITH}]},date:{operator:u.AND,constraints:[{value:null,matchMode:d.DATE_IS}]},status:{operator:u.OR,constraints:[{value:null,matchMode:d.EQUALS}]},paymentMethod:{operator:u.OR,constraints:[{value:null,matchMode:d.EQUALS}]}}),z=U(["order_confirmed","in_process","on_the_way","work_started","waiting_for_payment","completed"]),K=U(["Transfer Bank","Virtual Account(VA)","GoPay","OVO"]);function T(n){switch(n){case"order_confirmed":return"contrast";case"in_process":return"warn";case"on_the_way":return"info";case"work_started":return"help";case"waiting_for_payment":return"secondary";case"completed":return"success";default:return"default"}}function k(n){switch(n){case"order_confirmed":return"Pesanan Terkonfirmasi";case"in_process":return"Pesanan Diproses";case"on_the_way":return"Menuju Lokasi";case"work_started":return"Sedang Dikerjakan";case"waiting_for_payment":return"Menunggu Pembayaran";case"completed":return"Selesai";default:return"-"}}function q(n){switch(n){case 0:return"Tidak Butuh Tangga";case 1:return"Butuh Tangga";default:return null}}H(()=>N.vendors.map(n=>({id:n.id,code:n.id,name:n.name,location:n.address,date:n.created_at,status:n.deleted_at,city:n.city,services:n.vendor_service})));const E=H(()=>w.allOrder||[]);Ve(async()=>{await w.fetchOrder("monitoring"),await N.fetchVendor()});function G(n){return new Date(n).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const Q=n=>{P.value.toggle(n)},J=n=>{$.value.exportCSV()};return(n,l)=>{const Y=Ue,_=ce,X=Se,f=Ie,Z=De,c=de,b=ke,ee=ve,te=ye,ae=fe,V=_e,R=pe,oe=me,S=ue,le=ie,se=xe("tooltip");return m(),y(A,null,[t(Y,{breadcrumbItems:[{label:"Pesanan"}]}),o("div",Re,[l[17]||(l[17]=o("div",{class:"font-semibold text-xl mb-4"},"Data Pesanan Diproses",-1)),(m(),x(le,{ref_key:"dt",ref:$,key:j.value,value:r(E),paginator:!0,rows:10,dataKey:"id",filters:g.value,"onUpdate:filters":l[2]||(l[2]=e=>g.value=e),filterDisplay:"menu",loading:r(w).isLoading,globalFilterFields:["noInvoice","user.name","user.email","user.phone","items","location","service.name","properties.name","total_fee","vendor","date","status"],showGridlines:"",scrollable:""},{header:a(()=>[o("div",He,[o("div",Me,[t(_,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:l[0]||(l[0]=e=>J(e))})]),o("div",Be,[t(_,{type:"button",icon:"pi pi-download",outlined:""})]),t(Z,{class:"w-full md:w-auto"},{default:a(()=>[t(X,null,{default:a(()=>l[3]||(l[3]=[o("i",{class:"pi pi-search"},null,-1)])),_:1}),t(f,{modelValue:g.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=e=>g.value.global.value=e),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])]),empty:a(()=>l[4]||(l[4]=[p(" No order found. ")])),loading:a(()=>l[5]||(l[5]=[p(" Loading order data. Please wait. ")])),default:a(()=>[t(c,{sortable:"",field:"noInvoice",header:"Invoice",class:"min-w-[15rem]"},{body:a(({data:e})=>[p(i(e.invoice),1)]),filter:a(({filterModel:e})=>[t(f,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Invoice"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",field:"user.name",header:"Pelanggan",class:"min-w-[15rem]"},{body:a(({data:e})=>[o("div",Fe,[o("h6",Le,i(e.user.name),1),o("p",Oe,i(e.user.email),1),o("p",{class:"m-0 text-sm text-primary cursor-pointer hover:text-primary-300 transition-all max-w-fit",onClick:Q},[p(i(e.user.phone),1),l[6]||(l[6]=o("i",{class:"pi pi-angle-down ml-2",style:{"font-size":"0.8rem"}},null,-1))]),t(r($e),{ref_key:"opPhone",ref:P},{default:a(()=>[o("div",We,[o("div",null,[l[7]||(l[7]=o("h6",{class:"mb-0"},"Opsi Nomor Telepon",-1)),t(b)]),t(te,null,{default:a(()=>[t(f,{value:e.user.phone,readonly:"",class:"w-[25rem]"},null,8,["value"]),t(ee,null,{default:a(()=>[t(_,{icon:"pi pi-phone"})]),_:1})]),_:2},1024),o("div",je,[t(b),l[8]||(l[8]=o("p",{class:"m-0 text-center text-muted-color text-sm"},"Atau",-1)),t(b)]),o("div",ze,[l[9]||(l[9]=o("label",{for:"message"},"Kirim Pesan",-1)),t(ae,{id:"message"})]),t(_,{icon:"pi pi-send",label:"Kirim Pesan",iconPos:"right"})])]),_:2},1536)])]),filter:a(({filterModel:e})=>[t(f,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Pelanggan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Lokasi",filterField:"location",class:"min-w-[24rem]"},{body:a(({data:e})=>[p(i(e.location),1)]),filter:a(({filterModel:e})=>[t(f,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Kota"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Layanan",filterField:"service.name",class:"min-w-[40rem]"},{body:a(({data:e})=>[t(r(B),{value:"0"},{default:a(()=>[t(r(F),{value:"1",class:"accordion-table"},{default:a(()=>[t(r(L),null,{default:a(()=>[o("div",Ke,[e.service.full_image_url?(m(),y("img",{key:0,src:e.service.full_image_url,alt:e.service.name,class:"h-6 text-sm font-normal"},null,8,qe)):C("",!0),o("span",null,i(e.service.name),1)])]),_:2},1024),t(r(O),null,{default:a(()=>[t(b),t(r(B),{value:"0"},{default:a(()=>[(m(!0),y(A,null,M(e.problems,(s,D)=>(m(),x(r(F),{key:s.name,value:D},{default:a(()=>[t(r(L),{class:we({"accordion-subheader":e.service.image_url})},{default:a(()=>[p(i(s.name),1)]),_:2},1032,["class"]),t(r(O),{class:"accordion-content"},{default:a(()=>[o("div",Ee,[(m(!0),y(A,null,M(s.sub_problem,(v,ne)=>(m(),y("div",{key:ne,class:"w-full"},[o("div",Ge,[o("p",Qe,"â€¢ Kategori: "+i(v.name),1),o("div",Je,[t(R,{class:"inplace-display-full"},{display:a(()=>[o("div",Ye,[o("div",null,[o("p",Xe,"QTY: "+i(v.qty),1),o("p",Ze,"Harga: Rp"+i(n.formatPrice(v.price)),1)]),l[10]||(l[10]=o("i",{class:"pi pi-pencil ml-2"},null,-1))])]),content:a(({closeCallback:re})=>[o("div",et,[o("div",tt,[l[13]||(l[13]=o("p",{class:"m-0"},"QTY: ",-1)),t(V,{modelValue:v.qty,"onUpdate:modelValue":I=>v.qty=I,inputId:"horizontal-buttons",showButtons:"",buttonLayout:"horizontal",min:0,max:99,inputClass:" text-center border-l border-l-red-500 border-r border-r-green-500 bg-transparent max-w-[4rem]",incrementButtonClass:"border-green-500",decrementButtonClass:"border-red-500",small:""},{incrementbuttonicon:a(()=>l[11]||(l[11]=[o("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:a(()=>l[12]||(l[12]=[o("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["modelValue","onUpdate:modelValue"])]),o("div",at,[l[14]||(l[14]=o("p",{class:"m-0"},"Harga: ",-1)),t(V,{modelValue:v.price,"onUpdate:modelValue":I=>v.price=I,type:"text",placeholder:"Masukkan Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),t(_,{label:"Simpan",icon:"pi pi-check",outlined:"",severity:"success",class:"max-w-fit",onClick:re},null,8,["onClick"])])]),_:2},1024)])])]))),128))])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),t(c,{field:"properties.name",header:"Jenis Property",class:"min-w-[15rem]",sortable:""},{body:a(({data:e})=>[o("div",null,[o("p",ot,i(e.properties.name),1),e.isLadderRequired?(m(),x(oe,{key:0,value:q(e.isLadderRequired)??"",size:"small",class:"mb-2"},null,8,["value"])):C("",!0),t(R,{class:"inplace-custom-display"},{display:a(()=>[o("p",lt,[p("Rp"+i(n.formatPrice(e.properties.fee)),1),l[15]||(l[15]=o("i",{class:"pi pi-pencil ml-2"},null,-1))])]),content:a(({closeCallback:s})=>[o("div",st,[t(V,{modelValue:e.properties.fee,"onUpdate:modelValue":D=>e.properties.fee=D,type:"text",placeholder:"Cari Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"]),t(_,{icon:"pi pi-check",outlined:"",severity:"success",onClick:s},null,8,["onClick"])])]),_:2},1024)])]),filter:a(({filterModel:e})=>[t(f,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Property"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",field:"total_fee",header:"Total Harga",class:"min-w-[15rem]"},{body:a(({data:e})=>[e.total_fee?(m(),y("span",nt,"Rp"+i(n.formatPrice(e.total_fee)),1)):(m(),y("span",rt,"Harga belum ditentukan"))]),filter:a(({filterModel:e})=>[t(V,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Harga",inputId:"currency-indonesia",mode:"currency",currency:"IDR",locale:"id-ID",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Status",field:"status",filterMenuStyle:{width:"18rem"},class:"min-w-[20rem]"},{body:a(({data:e})=>[t(S,{value:k(e.status),severity:T(e.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:a(({filterModel:e})=>[t(r(W),{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:z,placeholder:"Pilih",showClear:""},{value:a(s=>[s.value!=null?(m(),x(S,{key:0,value:k(s.value),severity:T(s.value)},null,8,["value","severity"])):C("",!0)]),option:a(s=>[t(S,{value:k(s.option),severity:T(s.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(c,{sortable:"",field:"paymentMethod",header:"Metode Pembayaran",class:"min-w-[15rem]"},{body:a(({data:e})=>l[16]||(l[16]=[p(" Bank Transfer ")])),filter:a(({filterModel:e})=>[t(r(W),{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,options:K,placeholder:"Pilih",showClear:""},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(c,{sortable:"",field:"vendor",header:"Vendor Pilihan",class:"min-w-[15rem]"},{body:a(({data:e})=>{var s;return[o("span",null,i((s=e==null?void 0:e.vendor_id)==null?void 0:s.name),1)]}),filter:a(({filterModel:e})=>[t(f,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,type:"text",placeholder:"Cari Vendor"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",header:"Tanggal Pesanan",filterField:"date",dataType:"date",class:"min-w-[20rem]"},{body:a(({data:e})=>[p(i(G(e.created_at)),1)]),filter:a(({filterModel:e})=>[t(r(Ae),{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(c,{sortable:"",field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:a(({data:e})=>[o("div",it,[Te(t(_,{icon:"pi pi-external-link",severity:"info",text:"",as:"router-link",to:{name:"order-detail",params:{id:e.id}}},null,8,["to"]),[[se,"Detail Pesanan",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(r(Ce))],64)}}});export{$t as default};
