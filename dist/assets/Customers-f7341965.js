import{s as N}from"./index-5d8e68ae.js";import{s as O,a as F}from"./index-4e895b32.js";import{s as j}from"./index-5c342af9.js";import{s as P}from"./index-81bd3c8b.js";import{U as A}from"./users-88164ba6.js";import{d as D,r as R,o as h,c as M,b as s,f as l,e as a,J as d,N as x,L as B,S as Y,a as _,P as J,E as X,i as I,z as Z,t as T,D as G,W as w,X as S}from"./index-80696e42.js";import{s as ee}from"./index-6cac5877.js";import{s as le,a as oe}from"./index-7e1b4203.js";import{s as ne,a as ae}from"./index-6e8aba70.js";import{_ as te}from"./TopBreadcrumb-bd1bee55.js";import{s as se}from"./index-9bc907b6.js";import"./index-94e1ca5c.js";import"./index-b2d9bdf1.js";import"./index-9d928228.js";import"./index-bbd5c4c8.js";import"./index-bffc3597.js";import"./index-9108591b.js";import"./_plugin-vue_export-helper-c27b6911.js";const ie={class:"flex flex-col gap-2 mb-4"},re={class:"flex flex-col gap-2 mb-4"},de={class:"flex flex-col gap-2"},me={class:"flex justify-end gap-2 mt-8"},ue=D({__name:"EditCustomer",props:{customer:{type:Object,required:!0}},emits:["on-close","on-save"],setup(U,{emit:g}){const p=U,c=g,i=A(),r=R({name:p.customer.name,email:p.customer.email,phone:p.customer.phone?p.customer.phone.slice(3):""});async function u(){var n;const t={_method:"PATCH",name:r.name,email:r.email,phone:`+62${((n=r.phone)==null?void 0:n.toString())||""}`};await i.update(t,p.customer.id),c("on-save")}return(t,n)=>{const v=P,f=O,V=j,y=F,m=N;return h(),M(B,null,[s("div",ie,[n[5]||(n[5]=s("label",{for:"name"},"Nama Pelanggan",-1)),l(v,{modelValue:a(r).name,"onUpdate:modelValue":n[0]||(n[0]=e=>a(r).name=e),id:"name","aria-describedby":"name-help",placeholder:"Masukkan nama lengkap pelanggan"},null,8,["modelValue"])]),s("div",re,[n[6]||(n[6]=s("label",{for:"email"},"Nomor Hp Pelanggan",-1)),l(v,{modelValue:a(r).email,"onUpdate:modelValue":n[1]||(n[1]=e=>a(r).email=e),id:"email","aria-describedby":"phone-help",placeholder:"Masukkan email pelanggan"},null,8,["modelValue"])]),s("div",de,[n[8]||(n[8]=s("label",{for:"phone"},"Nomor Hp",-1)),l(y,null,{default:d(()=>[l(f,null,{default:d(()=>n[7]||(n[7]=[x(" +62 ")])),_:1}),l(V,{modelValue:a(r).phone,"onUpdate:modelValue":n[2]||(n[2]=e=>a(r).phone=e),id:"phone",inputId:"withoutgrouping",useGrouping:!1,fluid:"",placeholder:"Masukkan no hp pelanggan"},null,8,["modelValue"])]),_:1})]),s("div",me,[l(m,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:n[3]||(n[3]=e=>c("on-close"))}),l(m,{type:"button",label:"Simpan",disabled:t.$isQueryInvalid(a(r)),loading:a(i).isLoading,onClick:n[4]||(n[4]=e=>u())},null,8,["disabled","loading"])])],64)}}}),pe={class:"flex flex-col gap-2 mb-4"},ce={class:"flex flex-col gap-2 mb-4"},fe={class:"flex flex-col gap-2"},ge={class:"flex justify-end gap-2 mt-8"},ve=D({__name:"AddCustomer",emits:["on-close","on-save"],setup(U,{emit:g}){const p=g,c=A(),i=R({name:"",email:"",phone:null});async function r(){var u;i.phone=`+62${((u=i.phone)==null?void 0:u.toString())||""}`,await c.create(i),p("on-save")}return(u,t)=>{const n=P,v=O,f=j,V=F,y=N;return h(),M(B,null,[s("div",pe,[t[5]||(t[5]=s("label",{for:"name"},"Nama Pelanggan",-1)),l(n,{modelValue:a(i).name,"onUpdate:modelValue":t[0]||(t[0]=m=>a(i).name=m),id:"name","aria-describedby":"name-help",placeholder:"Masukkan nama lengkap pelanggan"},null,8,["modelValue"])]),s("div",ce,[t[6]||(t[6]=s("label",{for:"email"},"Email",-1)),l(n,{modelValue:a(i).email,"onUpdate:modelValue":t[1]||(t[1]=m=>a(i).email=m),id:"email","aria-describedby":"phone-help",placeholder:"Masukkan email pelanggan"},null,8,["modelValue"])]),s("div",fe,[t[8]||(t[8]=s("label",{for:"phone"},"Nomor Hp",-1)),l(V,null,{default:d(()=>[l(v,null,{default:d(()=>t[7]||(t[7]=[x(" +62 ")])),_:1}),l(f,{modelValue:a(i).phone,"onUpdate:modelValue":t[2]||(t[2]=m=>a(i).phone=m),id:"phone",inputId:"withoutgrouping",useGrouping:!1,fluid:"",placeholder:"Masukkan no hp pelanggan"},null,8,["modelValue"])]),_:1})]),s("div",ge,[l(y,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:t[3]||(t[3]=m=>p("on-close"))}),l(y,{type:"button",label:"Simpan",disabled:u.$isQueryInvalid(a(i)),loading:a(c).isLoading,onClick:t[4]||(t[4]=m=>r())},null,8,["disabled","loading"])])],64)}}}),be={class:"card mt-8"},_e={class:"flex flex-col md:flex-row justify-between gap-4"},ye={class:"flex items-center gap-4 md:order-2 order-1"},xe={class:"hidden md:flex"},Ve={class:"flex md:hidden"},$e=["href"],ke={class:"flex gap-4 items-center"},je=D({__name:"Customers",setup(U){const g=A(),p=Y(),c=_(),i=_({global:{value:null,matchMode:w.CONTAINS},name:{operator:S.AND,constraints:[{value:null,matchMode:w.STARTS_WITH}]},email:{operator:S.AND,constraints:[{value:null,matchMode:w.STARTS_WITH}]},phone:{operator:S.AND,constraints:[{value:null,matchMode:w.STARTS_WITH}]}}),r=_(!1),u=_(!1),t=_(0),n=_(!1),v=_(null);async function f(){await g.getAll(1),t.value+=1}J(async()=>{await f()});const V=m=>{c.value.exportCSV()},y=m=>{p.require({target:m.currentTarget,message:"Yakin ingin menghapus data pelanggan ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:async()=>{await g.delete(m),await f()}})};return(m,e)=>{const q=te,$=N,L=ne,k=P,W=ae,C=oe,z=le,K=ve,H=ee,Q=ue,E=Z("tooltip");return h(),M(B,null,[l(q,{breadcrumbItems:[{label:"Pelanggan"}]}),s("div",be,[e[13]||(e[13]=s("div",{class:"font-semibold text-xl mb-4"},"Data Pelanggan",-1)),(h(),X(z,{ref_key:"dt",ref:c,key:a(t),value:a(g).users,paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:a(i),"onUpdate:filters":e[3]||(e[3]=o=>I(i)?i.value=o:null),filterDisplay:"menu",loading:a(n),globalFilterFields:["name","email","phone"],showGridlines:""},{header:d(()=>[s("div",_e,[l($,{type:"button",icon:"pi pi-plus",label:"Tambah Pelanggan",class:"md:order-1 order-2",onClick:e[0]||(e[0]=o=>u.value=!0)}),s("div",ye,[s("div",xe,[l($,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:e[1]||(e[1]=o=>V(o))})]),s("div",Ve,[l($,{type:"button",icon:"pi pi-download",outlined:""})]),l(W,{class:"w-full md:w-auto"},{default:d(()=>[l(L,null,{default:d(()=>e[10]||(e[10]=[s("i",{class:"pi pi-search"},null,-1)])),_:1}),l(k,{modelValue:a(i).global.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a(i).global.value=o),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:d(()=>e[11]||(e[11]=[x(" Tidak ada data Pelanggan. ")])),loading:d(()=>e[12]||(e[12]=[x(" Memuat data Pelanggan. Mohon tunggu. ")])),default:d(()=>[l(C,{sortable:"",field:"name",header:"Nama",class:"min-w-[15rem]"},{body:d(({data:o})=>[x(T(o.name),1)]),filter:d(({filterModel:o})=>[l(k,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b,type:"text",placeholder:"Cari Pelanggan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(C,{sortable:"",field:"email",header:"Alamat Email",class:"min-w-[15rem]"},{body:d(({data:o})=>[s("a",{href:"mailto:"+o.email,class:"text-blue-400 hover:text-blue-500 transition-all",target:"_blank"},T(o.email),9,$e)]),filter:d(({filterModel:o})=>[l(k,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b,type:"text",placeholder:"Cari Pelanggan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(C,{sortable:"",field:"phone",header:"Nomor Hp",class:"min-w-[15rem]"},{body:d(({data:o})=>[x(T(o.phone),1)]),filter:d(({filterModel:o})=>[l(k,{modelValue:o.value,"onUpdate:modelValue":b=>o.value=b,type:"text",placeholder:"Cari Pelanggan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(C,{sortable:"",field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:d(({data:o})=>[s("div",ke,[G(l($,{icon:"pi pi-pencil",severity:"info",text:"",onClick:b=>(v.value=o,r.value=!0)},null,8,["onClick"]),[[E,"Ubah",void 0,{bottom:!0}]]),G(l($,{icon:"pi pi-trash",severity:"danger",text:"",onClick:b=>y(o.id)},null,8,["onClick"]),[[E,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),l(a(se)),l(H,{visible:a(u),"onUpdate:visible":e[6]||(e[6]=o=>I(u)?u.value=o:null),maximizable:"",modal:"",header:"Tambah Pelanggan",class:"sm:w-1/2 w-full"},{default:d(()=>[l(K,{onOnClose:e[4]||(e[4]=o=>u.value=!1),onOnSave:e[5]||(e[5]=o=>(u.value=!1,f()))})]),_:1},8,["visible"]),l(H,{visible:a(r),"onUpdate:visible":e[9]||(e[9]=o=>I(r)?r.value=o:null),maximizable:"",modal:"",header:"Ubah Pelanggan",class:"sm:w-1/2 w-full"},{default:d(()=>[l(Q,{customer:a(v),onOnClose:e[7]||(e[7]=o=>r.value=!1),onOnSave:e[8]||(e[8]=o=>(r.value=!1,f()))},null,8,["customer"])]),_:1},8,["visible"])],64)}}});export{je as default};
