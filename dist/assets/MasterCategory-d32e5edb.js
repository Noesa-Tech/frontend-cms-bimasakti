var b=(g,v,i)=>new Promise((h,S)=>{var x=p=>{try{m(i.next(p))}catch(y){S(y)}},c=p=>{try{m(i.throw(p))}catch(y){S(y)}},m=p=>p.done?h(p.value):Promise.resolve(p.value).then(x,c);m((i=i.apply(g,v)).next())});import{s as z}from"./index-587dde32.js";import{s as W}from"./index-f6c98b31.js";import{s as G}from"./index-9b60516b.js";import{s as D,a as re,b as ue}from"./index-8f2364ad.js";import{S as te}from"./service-b7788331.js";import{a5 as de,a6 as M,a7 as E,p as Q,q as K,a2 as Y,Q as q,o as $,c as B,a,h as t,z as s,w as r,t as V,n as I,k as F,M as J,a1 as ce,v as k,D as H,J as me,O,K as ee,a3 as U,a4 as N}from"./index-a4806e1d.js";import{s as pe}from"./index-c4113e67.js";import{s as ve,a as ye}from"./index-d415334a.js";import{_ as fe}from"./TopBreadcrumb-0696f7f6.js";import{s as ge}from"./index-2fe30ee1.js";import{s as _e}from"./index-07aede61.js";import"./index-15c61f91.js";import"./index-b323e312.js";import"./index-0db1eb5a.js";import"./index-b1b6b2fd.js";import"./_plugin-vue_export-helper-c27b6911.js";const X=de("ServiceCategoryStore",{state:()=>({isLoading:!1,serviceCategoryAll:[]}),actions:{fetchServiceCategory(g,v){return b(this,null,function*(){this.isLoading=!0;try{const i=yield M.get(`/auth/services-problem?status=${g}&isCustom=${v}`);this.serviceCategoryAll=i.data}catch(i){}finally{this.isLoading=!1}})},addServiceCategory(g){return b(this,null,function*(){this.isLoading=!0;try{const v=yield M.post("/auth/services-problem",g);E("success",v.message)}catch(v){}finally{this.isLoading=!1}})},updateServiceCategory(g,v){return b(this,null,function*(){this.isLoading=!0;try{const i=yield M.post(`/auth/services-problem/${g}`,v);E("success",i.message)}catch(i){}finally{this.isLoading=!1}})},delete(g){return b(this,null,function*(){this.isLoading=!0;try{const v=yield M.delete(`/auth/services-problem/${g}`);E("success",v.message)}catch(v){}finally{this.isLoading=!1}})}}}),be={class:"flex flex-col gap-2 mb-4"},he={class:"flex flex-col gap-2 mb-4"},Se={key:0,class:"flex gap-4 items-center"},$e=["src"],xe={class:"m-0"},Ce={class:"flex gap-4 items-center"},we=["src"],Ve={class:"m-0"},Te={class:"flex flex-col gap-2"},ke={class:"flex justify-end gap-2 mt-8"},Ue=Q({__name:"EditCategory",props:{detail:{type:Object,required:!0}},emits:["on-close","on-save"],setup(g,{emit:v}){const i=g,h=v,S=te(),x=X(),c=K([0,1]),m=K({name:i.detail.name,service:{id:i.detail.service.id,name:i.detail.service.name,image_url:i.detail.image_url},status:i.detail.status});function p(){return b(this,null,function*(){var d;const n={_method:"PATCH",name:m.name,status:m.status,service_id:(d=m==null?void 0:m.service)==null?void 0:d.id};yield x.updateServiceCategory(i.detail.id,n),h("on-save")})}function y(n){switch(n){case 0:return"danger";case 1:return"success"}}function C(n){switch(n){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const _=Y(()=>S.serviceAll||[]);return q(()=>b(this,null,function*(){yield S.fetchService()})),(n,d)=>{const T=G,w=W,u=z;return $(),B(J,null,[a("div",be,[d[5]||(d[5]=a("label",{for:"name"},"Nama Kategori",-1)),t(T,{modelValue:s(m).name,"onUpdate:modelValue":d[0]||(d[0]=o=>s(m).name=o),id:"name","aria-describedby":"name-help",placeholder:"Nama Kategori"},null,8,["modelValue"])]),a("div",he,[d[6]||(d[6]=a("label",{for:"desc"},"Layanan",-1)),t(s(D),{modelValue:s(m).service,"onUpdate:modelValue":d[1]||(d[1]=o=>s(m).service=o),value:s(m).service,optionLabel:"name",options:s(_),placeholder:"Pilih Layanan"},{value:r(o=>[o.value!=null?($(),B("div",Se,[a("img",{src:o.value.image_url,alt:"",class:"h-4"},null,8,$e),a("p",xe,V(o.value.name),1)])):I("",!0)]),option:r(o=>[a("div",Ce,[a("img",{src:o.option.image_url,alt:"",class:"h-4"},null,8,we),a("p",Ve,V(o.option.name),1)])]),_:1},8,["modelValue","value","options"])]),a("div",Te,[d[7]||(d[7]=a("label",{for:"desc"},"Status",-1)),t(s(D),{modelValue:s(m).status,"onUpdate:modelValue":d[2]||(d[2]=o=>s(m).status=o),options:s(c),placeholder:"Pilih Status"},{value:r(o=>[o.value!=null?($(),F(w,{key:0,value:C(o.value),severity:y(o.value)},null,8,["value","severity"])):I("",!0)]),option:r(o=>[t(w,{value:C(o.option),severity:y(o.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",ke,[t(u,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:d[3]||(d[3]=o=>h("on-close"))}),t(u,{type:"button",label:"Simpan",onClick:d[4]||(d[4]=o=>p())})])],64)}}}),Ae={class:"flex flex-col gap-2 mb-4"},Le={class:"flex flex-col gap-2 mb-4"},Ne={key:0,class:"flex gap-4 items-center"},De=["src"],Ke={class:"m-0"},Be={class:"flex gap-4 items-center"},Ie=["src"],Me={class:"m-0"},Oe={class:"flex flex-col gap-2"},Fe={class:"flex justify-end gap-2 mt-8"},Re=Q({__name:"AddCategory",emits:["on-close","on-save"],setup(g,{emit:v}){const i=v,h=te(),S=X(),x=K([0,1]),c=K({name:"",price:0,service:null,status:null});function m(){return b(this,null,function*(){var n;const _={name:c.name,status:c.status,service_id:(n=c==null?void 0:c.service)==null?void 0:n.id};yield S.addServiceCategory(_),i("on-save")})}function p(_){switch(_){case 0:return"danger";case 1:return"success"}}function y(_){switch(_){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}const C=Y(()=>h.serviceAll||[]);return q(()=>b(this,null,function*(){yield h.fetchService()})),(_,n)=>{const d=G,T=W,w=z;return $(),B(J,null,[a("div",Ae,[n[5]||(n[5]=a("label",{for:"name"},"Nama Kategori",-1)),t(d,{modelValue:s(c).name,"onUpdate:modelValue":n[0]||(n[0]=u=>s(c).name=u),id:"name","aria-describedby":"name-help",placeholder:"Nama Kategori"},null,8,["modelValue"])]),a("div",Le,[n[6]||(n[6]=a("label",{for:"desc"},"Layanan",-1)),t(s(D),{modelValue:s(c).service,"onUpdate:modelValue":n[1]||(n[1]=u=>s(c).service=u),options:s(C),placeholder:"Pilih Layanan"},{value:r(u=>[u.value!=null?($(),B("div",Ne,[a("img",{src:u.value.image_url,alt:"",class:"h-4"},null,8,De),a("p",Ke,V(u.value.name),1)])):I("",!0)]),option:r(u=>[a("div",Be,[a("img",{src:u.option.image_url,alt:"",class:"h-4"},null,8,Ie),a("p",Me,V(u.option.name),1)])]),_:1},8,["modelValue","options"])]),a("div",Oe,[n[7]||(n[7]=a("label",{for:"desc"},"Status",-1)),t(s(D),{modelValue:s(c).status,"onUpdate:modelValue":n[2]||(n[2]=u=>s(c).status=u),options:s(x),placeholder:"Pilih Status"},{value:r(u=>[u.value!=null?($(),F(T,{key:0,value:y(u.value),severity:p(u.value)},null,8,["value","severity"])):I("",!0)]),option:r(u=>[t(T,{value:y(u.option),severity:p(u.option)},null,8,["value","severity"])]),_:1},8,["modelValue","options"])]),a("div",Fe,[t(w,{type:"button",label:"Batal",text:"",severity:"secondary",onClick:n[3]||(n[3]=u=>i("on-close"))}),t(w,{type:"button",label:"Simpan",onClick:n[4]||(n[4]=u=>m())})])],64)}}}),je={class:"card mt-8"},Ee={class:"flex flex-col md:flex-row justify-between gap-4"},He={class:"flex items-center gap-4 md:order-2 order-1"},ze={class:"hidden md:flex"},We={class:"flex md:hidden"},Ge={class:"flex flex-col items-center gap-2"},Qe=["alt","src"],Ye={class:"flex gap-4 items-center"},mt=Q({__name:"MasterCategory",setup(g){const v=ce(),i=X(),h=k(),S=k(null),x=k(0),c=k({global:{value:null,matchMode:U.CONTAINS},"service.name":{operator:N.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},price:{operator:N.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},name:{operator:N.AND,constraints:[{value:null,matchMode:U.STARTS_WITH}]},updated_at:{operator:N.AND,constraints:[{value:null,matchMode:U.DATE_IS}]},status:{operator:N.OR,constraints:[{value:null,matchMode:U.EQUALS}]}}),m=K([1,0]),p=k(!1),y=k(!1);function C(o){switch(o){case 0:return"danger";case 1:return"success"}}function _(o){switch(o){case 0:return"Tidak Tersedia";case 1:return"Tersedia"}}function n(o){return new Date(o).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}const d=o=>{h.value.exportCSV()},T=o=>{v.require({target:o.currentTarget,message:"Yakin ingin menghapus service problem ini?",icon:"pi pi-info-circle",rejectProps:{label:"Batal",severity:"secondary",outlined:!0},acceptProps:{label:"Yakin",severity:"danger"},accept:()=>b(this,null,function*(){yield i.delete(o),yield i.fetchServiceCategory("",0)}),reject:()=>{}})};function w(){return b(this,null,function*(){yield i.fetchServiceCategory("",0),x.value+=1})}const u=Y(()=>i.serviceCategoryAll||[]);return q(()=>b(this,null,function*(){yield i.fetchServiceCategory("",0)})),(o,l)=>{const ae=fe,A=z,se=re,R=G,oe=ue,L=ye,j=W,le=ve,ne=Re,Z=pe,ie=Ue,P=me("tooltip");return $(),B(J,null,[t(ae,{breadcrumbItems:[{label:"Master"},{label:"Kategori"}]}),a("div",je,[l[13]||(l[13]=a("div",{class:"font-semibold text-xl mb-4"},"Data Kategori",-1)),($(),F(le,{ref_key:"dt",ref:h,key:s(x),value:s(u),rowGroupMode:"rowspan",groupRowsBy:"service.name",paginator:!0,rows:10,dataKey:"id",rowHover:!0,filters:s(c),"onUpdate:filters":l[3]||(l[3]=e=>H(c)?c.value=e:null),filterDisplay:"menu",loading:s(i).isLoading,globalFilterFields:["service.name","name","price","status","updated_at"],showGridlines:""},{header:r(()=>[a("div",Ee,[t(A,{type:"button",icon:"pi pi-plus",label:"Tambah Kategori",class:"md:order-1 order-2",onClick:l[0]||(l[0]=e=>y.value=!0)}),a("div",He,[a("div",ze,[t(A,{type:"button",icon:"pi pi-download",outlined:"",label:"Unduh",onClick:l[1]||(l[1]=e=>d(e))})]),a("div",We,[t(A,{type:"button",icon:"pi pi-download",outlined:""})]),t(oe,{class:"w-full md:w-auto"},{default:r(()=>[t(se,null,{default:r(()=>l[10]||(l[10]=[a("i",{class:"pi pi-search"},null,-1)])),_:1}),t(R,{modelValue:s(c).global.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s(c).global.value=e),placeholder:"Pencarian",fluid:""},null,8,["modelValue"])]),_:1})])])]),empty:r(()=>l[11]||(l[11]=[O(" Tidak ada data Kategori. ")])),loading:r(()=>l[12]||(l[12]=[O(" Memuat data Kategori. Mohon tunggu. ")])),default:r(()=>[t(L,{field:"service.name",header:"Layanan"},{body:r(({data:e})=>[a("div",Ge,[a("img",{alt:e.service.name,src:e.image_url,width:"32",style:{"vertical-align":"middle"}},null,8,Qe),a("span",null,V(e.service.name),1)])]),filter:r(({filterModel:e})=>[t(R,{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(L,{field:"name",header:"Nama Kategori",class:"min-w-[15rem]"},{body:r(({data:e})=>[O(V(e.name),1)]),filter:r(({filterModel:e})=>[t(R,{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,type:"text",placeholder:"Cari Layanan"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(L,{header:"Status",field:"status",filterMenuStyle:{width:"14rem"}},{body:r(({data:e})=>[t(j,{value:_(e.status),severity:C(e.status),class:"whitespace-nowrap"},null,8,["value","severity"])]),filter:r(({filterModel:e})=>[t(s(D),{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,options:s(m),placeholder:"Pilih",showClear:""},{value:r(f=>[f.value?($(),F(j,{key:0,value:_(f.value),severity:C(f.value)},null,8,["value","severity"])):I("",!0)]),option:r(f=>[t(j,{value:_(f.option),severity:C(f.option)},null,8,["value","severity"])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),_:1}),t(L,{header:"Terakhir Update",filterField:"updated_at",dataType:"date",class:"min-w-[12rem]"},{body:r(({data:e})=>[O(V(n(e.updated_at)),1)]),filter:r(({filterModel:e})=>[t(s(ge),{modelValue:e.value,"onUpdate:modelValue":f=>e.value=f,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(L,{field:"id",header:"Action",bodyClass:"text-center",class:"min-w-[10rem]"},{body:r(({data:e})=>[a("div",Ye,[ee(t(A,{icon:"pi pi-pencil",severity:"info",text:"",onClick:f=>(S.value=e,p.value=!0)},null,8,["onClick"]),[[P,"Ubah",void 0,{bottom:!0}]]),ee(t(A,{icon:"pi pi-trash",severity:"danger",text:"",onClick:f=>T(e.id)},null,8,["onClick"]),[[P,"Hapus",void 0,{bottom:!0}]])])]),_:1})]),_:1},8,["value","filters","loading"]))]),t(s(_e)),t(Z,{visible:s(y),"onUpdate:visible":l[6]||(l[6]=e=>H(y)?y.value=e:null),maximizable:"",modal:"",header:"Tambah Kategori",class:"sm:w-1/2 w-full"},{default:r(()=>[t(ne,{onOnClose:l[4]||(l[4]=e=>y.value=!1),onOnSave:l[5]||(l[5]=e=>(y.value=!1,w()))})]),_:1},8,["visible"]),t(Z,{visible:s(p),"onUpdate:visible":l[9]||(l[9]=e=>H(p)?p.value=e:null),maximizable:"",modal:"",header:"Ubah Kategori",class:"sm:w-1/2 w-full"},{default:r(()=>[t(ie,{detail:s(S),onOnClose:l[7]||(l[7]=e=>p.value=!1),onOnSave:l[8]||(l[8]=e=>(p.value=!1,w()))},null,8,["detail"])]),_:1},8,["visible"])],64)}}});export{mt as default};
